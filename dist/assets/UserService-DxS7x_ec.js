const s="espo_profile_",o={tournamentsPlayed:0,tournamentsWon:0,totalEarnings:0,referralCode:"ESPO"+Math.random().toString(36).substring(2,8).toUpperCase(),referralEarnings:0,gameAccounts:{},settings:{tournamentReminders:!0,matchResults:!0,newTournaments:!0,teamInvites:!0}};class a{async getProfile(t){const n=s+t,e=localStorage.getItem(n);return e?JSON.parse(e):(localStorage.setItem(n,JSON.stringify(o)),o)}subscribeToProfile(t,n){const e=async()=>{const r=await this.getProfile(t);n(r)};return e(),window.addEventListener("profileUpdate",e),()=>window.removeEventListener("profileUpdate",e)}async updateProfile(t,n){const e=await this.getProfile(t),r={...e,...n,gameAccounts:{...e.gameAccounts,...n.gameAccounts},settings:{...e.settings,...n.settings}};localStorage.setItem(s+t,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("profileUpdate"))}async searchUsers(t){return console.log("Searching users locally:",t),[]}}const c=new a;export{c as u};
