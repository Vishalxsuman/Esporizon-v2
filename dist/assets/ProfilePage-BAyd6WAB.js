import{c as A,j as e,T as Y,U as xe,z as $,k as L,h as fe,n as f,u as V,F as Le}from"./index-BI1Zh8jC.js";import{r as i,d as re,e as Ae}from"./react-vendor-wpuS94OW.js";import{C as Pe,P as de}from"./ProfileService-CPlCF0Q6.js";import{m as T,A as H}from"./animation-vendor-DcM-v-LS.js";import{S as ue}from"./shield-UrmeYB5b.js";import{S as je}from"./star-CxJ_cYNy.js";import{C as Fe}from"./crown-jJBmEEOr.js";import{X as ie}from"./x-TGG6ZPAc.js";import{C as Ue}from"./circle-check-big-CvadS6Gn.js";import{G as ve}from"./globe-go4E1SxS.js";import{G as $e}from"./gamepad-2-nPqXZvCW.js";import{S as qe}from"./share-2-DEvRuyM1.js";import{S as _e}from"./save-CazO1OzS.js";import{M as me}from"./message-square-BC04dgYS.js";import{L as De}from"./loader-circle-DGd37Dy2.js";import{S as we}from"./send-BLDoqAZd.js";import{C as Oe}from"./calendar-BNeAeAFF.js";import{S as Be}from"./swords-de7hc2L9.js";import{W as he}from"./wallet-Byq8_oQo.js";import{T as Ge}from"./trending-up-uCxCWmjX.js";import{t as We}from"./TournamentService-C6zcdh7M.js";import{T as He}from"./TournamentCard-CJWdgtbm.js";import{S as Ve}from"./shield-check-BcfqPY-Y.js";import{Z as Qe}from"./zap-Bgyi282r.js";import{U as ye}from"./users-Doj8e7tS.js";import{P as Ye}from"./plus-CYFQFGLI.js";import{T as Ke}from"./trash-2-ClYseKJa.js";import{u as Ne}from"./UserService-Ba7STw_o.js";import{S as ke}from"./search-DA4wBiUK.js";import{U as ae,L as Ze}from"./user-plus-BVdqSAr5.js";import{C as Xe}from"./check-DZgxOBsh.js";import{M as ze}from"./mail-CL2mtyu-.js";import{B as Se}from"./bell-wyXrXbMK.js";import{C as Ce}from"./chevron-right-LsW6WU4n.js";import{M as Me}from"./message-circle-DjAami0G.js";import{C as Ee}from"./chevron-left-BUQOO5Dj.js";import{S as Je}from"./settings-OzBfXTSx.js";import{A as et}from"./arrow-left-CF79Ni4S.js";import"./indian-rupee-W2Zd5mVq.js";import"./clock-BatA4oMZ.js";import"./arrow-right-CJAg3w6b.js";import"./lock-Cscx1y43.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],st=A("circle-question-mark",tt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],rt=A("ellipsis-vertical",at);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],lt=A("external-link",it);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ct=A("file-text",nt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],dt=A("image",ot);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ut=A("key",xt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ht=A("languages",mt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],te=A("link",pt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],pe=A("loader",bt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ft=A("map-pin",gt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Te=A("pen-line",jt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wt=A("upload",vt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nt=A("user-check",yt),B=({username:r,rank:s,avatarType:t="initials",size:n="medium",showBadge:d=!0,className:o=""})=>{const l={small:{container:"w-16 h-16",rounded:"rounded-xl",badge:"w-5 h-5",badgeIcon:10,badgePosition:"-bottom-1 -right-1"},medium:{container:"w-24 h-24",rounded:"rounded-2xl",badge:"w-7 h-7",badgeIcon:12,badgePosition:"-bottom-1.5 -right-1.5"},large:{container:"w-32 h-32",rounded:"rounded-[2rem]",badge:"w-8 h-8",badgeIcon:14,badgePosition:"-bottom-2 -right-2"}}[n],c=b=>{switch(b?.toLowerCase()){case"elite":return"from-yellow-400 via-orange-500 to-red-600";case"pro":return"from-purple-400 to-pink-600";case"diamond":return"from-blue-400 to-cyan-500";case"platinum":return"from-teal-400 to-emerald-500";case"gold":return"from-yellow-300 to-amber-500";case"silver":return"from-slate-300 to-slate-400";default:return"from-stone-500 to-stone-700"}},y=b=>{const j=l.badgeIcon;switch(b?.toLowerCase()){case"elite":case"pro":return e.jsx(Fe,{size:j,className:"text-white drop-shadow-md"});case"diamond":case"platinum":return e.jsx(je,{size:j,className:"text-white drop-shadow-md"});case"gold":return e.jsx(Y,{size:j,className:"text-white drop-shadow-md"});default:return e.jsx(ue,{size:j,className:"text-white drop-shadow-md"})}},g=()=>{const b=r?.charAt(0).toUpperCase()||"E";switch(t){case"initials":return`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=random&color=fff&size=256&bold=true`;case"geometric":return`https://source.boringavatars.com/beam/256/${encodeURIComponent(r)}?colors=14b8a6,06b6d4,8b5cf6,ec4899,f59e0b`;case"gradient":return`https://source.boringavatars.com/bauhaus/256/${encodeURIComponent(r)}?colors=14b8a6,06b6d4,8b5cf6,ec4899,f59e0b`;default:return`https://ui-avatars.com/api/?name=${b}&background=1a1a1a&color=14b8a6&size=256&bold=true`}},v=c(s);return e.jsxs("div",{className:`relative ${o}`,children:[e.jsx(T.div,{className:`absolute inset-0 bg-gradient-to-r ${v} blur-2xl opacity-20`,animate:{opacity:[.15,.25,.15]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:`relative ${l.container} ${l.rounded} p-[3px] bg-gradient-to-br ${v}`,children:[e.jsxs("div",{className:`w-full h-full ${l.rounded==="rounded-xl"?"rounded-[0.65rem]":(l.rounded==="rounded-2xl","rounded-[1.8rem]")} bg-[var(--bg-primary)] overflow-hidden relative`,children:[e.jsx("img",{src:g(),alt:`${r}'s avatar`,className:"w-full h-full object-cover",onError:b=>{b.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=random&color=fff&size=256&bold=true`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/40 to-transparent"})]}),d&&e.jsx(T.div,{className:`absolute ${l.badgePosition} bg-[var(--bg-primary)] p-1 rounded-full border border-[var(--border)]`,whileHover:{scale:1.1},transition:{type:"spring",stiffness:400},children:e.jsx("div",{className:`${l.badge} rounded-full bg-gradient-to-br ${v} flex items-center justify-center shadow-lg`,children:y(s)})})]})]})},kt="dzpdypyxq",zt="esporizon_uploads",St=`https://api.cloudinary.com/v1_1/${kt}/image/upload`,Ct=5*1024*1024,Mt=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];function Et(r){if(!Mt.includes(r.type))throw new Error("Invalid file type. Only JPEG, PNG, GIF, and WEBP images are allowed.");if(r.size>Ct){const s=(r.size/1048576).toFixed(2);throw new Error(`File size (${s}MB) exceeds the maximum limit of 5MB.`)}}async function be(r){Et(r);const s=new FormData;s.append("file",r),s.append("upload_preset",zt);try{const t=await fetch(St,{method:"POST",body:s});if(!t.ok){const d=await t.json().catch(()=>({}));throw new Error(d.error?.message||`Upload failed with status ${t.status}`)}return(await t.json()).secure_url}catch(t){throw t instanceof TypeError?new Error("Network error. Please check your internet connection and try again."):t}}const Tt=["India","United States","United Kingdom","Canada","Australia","Singapore","Malaysia","Other"],Rt=["English","Hindi","Tamil","Telugu","Bengali","Marathi","Gujarati","Kannada"],It=({isOpen:r,onClose:s,profile:t,user:n,onSave:d})=>{const[o,m]=i.useState(""),[l,c]=i.useState(""),[y,g]=i.useState("");i.useEffect(()=>{if(t)m(String(t.displayName||"")),c(String(t.username||"")),g(String(t.bio||""));else if(n){const u=n;m(String(u.displayName||u.fullName||""))}},[t,n]);const[v,b]=i.useState(t?.country||"India"),[j,w]=i.useState(t?.location||""),[M,z]=i.useState(t?.languages||[]),[x,a]=i.useState({discord:t?.socialLinks?.discord||"",twitter:t?.socialLinks?.twitter||"",instagram:t?.socialLinks?.instagram||"",youtube:t?.socialLinks?.youtube||"",twitch:t?.socialLinks?.twitch||""}),[p,S]=i.useState(t?.gameAccounts||{}),[G,P]=i.useState(null),[I,U]=i.useState(null),[h,R]=i.useState(null),[E,Q]=i.useState(null),[K,Z]=i.useState(!1),[le,X]=i.useState(!1),[D,F]=i.useState(!1),[N,W]=i.useState("idle"),O=i.useRef(null),J=i.useRef(null);i.useEffect(()=>{if(!l||l===t?.username){W(l===t?.username?"available":"idle"),F(!1);return}F(!0);const u=setTimeout(async()=>{if(l.length<3){W("invalid"),F(!1);return}try{W("available")}catch{}finally{F(!1)}},800);return()=>clearTimeout(u)},[l,t]);const ee=(u,k)=>{const C=u.target.files?.[0];if(!C)return;if(!C.type.startsWith("image/")){$.error("Invalid file type");return}if(C.size>5*1024*1024){$.error("Image exceeds 5MB limit");return}const q=new FileReader;q.onloadend=()=>{k==="avatar"?(P(C),U(q.result)):(R(C),Q(q.result))},q.readAsDataURL(C)},ne=u=>{if(M.includes(u))z(k=>k.filter(C=>C!==u));else{if(M.length>=3){$.error("Max 3 languages allowed");return}z(k=>[...k,u])}},ce=async()=>{if(n?.id||n?.uid){if(N==="taken"||N==="invalid"){$.error("Identification Error: Username unavailable");return}Z(!0),X(!0);try{let k,C;if(G)try{k=await be(G)}catch{$.error("Avatar upload failed")}if(h)try{C=await be(h)}catch{$.error("Banner upload failed")}const q={username:l.toLowerCase().trim(),displayName:o.trim(),bio:y,country:v,location:j,languages:M,socialLinks:x,gameAccounts:p};k&&(q.avatarUrl=k),C&&(q.bannerUrl=C),await de.updateProfile(n.uid||n.id,q,n.id),$.success("Operational Profile Updated"),d&&d(),s()}catch{$.error("Logistical Failure during Update")}finally{Z(!1),X(!1)}}},Re=(u,k)=>{S(C=>({...C,[u]:k}))};return e.jsx(H,{children:r&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"absolute inset-0 bg-black/90 backdrop-blur-md"}),e.jsxs(T.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl bg-[#0a0e1a] border border-white/10 rounded-[2rem] overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between bg-gradient-to-r from-teal-500/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-teal-500 rounded-full"}),e.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.3em] italic text-white",children:"Edit Combat Dossier"})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/5 rounded-xl transition-all text-zinc-400 hover:text-white",children:e.jsx(ie,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-32 w-full rounded-2xl bg-zinc-900 border border-white/5 overflow-hidden relative group",children:[E?e.jsx("img",{src:E,alt:"Banner",className:"w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity"}):t?.bannerUrl?e.jsx("img",{src:t.bannerUrl,alt:"Banner",className:"w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity"}):e.jsx("div",{className:"w-full h-full bg-[url('/grid.svg')] opacity-20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>J.current?.click(),className:"px-4 py-2 bg-black/50 backdrop-blur border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-teal-500 hover:text-black transition-all flex items-center gap-2",children:[e.jsx(wt,{size:14})," Change Banner"]})}),e.jsx("input",{type:"file",ref:J,onChange:u=>ee(u,"banner"),accept:"image/*",className:"hidden"})]}),e.jsx("div",{className:"absolute -bottom-10 left-6",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-[2rem] bg-[#0a0e1a] p-1.5",children:e.jsxs("div",{className:"w-full h-full rounded-[1.6rem] bg-zinc-800 overflow-hidden relative",children:[I?e.jsx("img",{src:I,alt:"Avatar",className:"w-full h-full object-cover"}):n?.photoURL||t?.avatarUrl?e.jsx("img",{src:n?.photoURL||t?.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(xe,{className:"text-zinc-600"})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>O.current?.click(),children:e.jsx(dt,{size:20,className:"text-white"})})]})}),e.jsx("input",{type:"file",ref:O,onChange:u=>ee(u,"avatar"),accept:"image/*",className:"hidden"})]})})]}),e.jsxs("div",{className:"pt-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 ml-1",children:"Call Sign (Display Name)"}),e.jsx("input",{type:"text",value:o,onChange:u=>m(u.target.value),className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-4 text-sm font-bold focus:border-teal-500/50 focus:outline-none transition-all placeholder:text-zinc-700",placeholder:"Enter display name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 ml-1",children:"Agent ID (@Username)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:u=>c(u.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:`w-full bg-[#0E1424] border rounded-xl p-4 pr-12 text-sm font-bold focus:outline-none transition-all placeholder:text-zinc-700 ${N==="taken"?"border-red-500/50":N==="available"?"border-teal-500/50":"border-white/5"}`,placeholder:"unique_id"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:D?e.jsx(pe,{className:"w-4 h-4 animate-spin text-teal-500"}):N==="available"?e.jsx(Ue,{className:"w-4 h-4 text-teal-500"}):N==="taken"?e.jsx(Pe,{className:"w-4 h-4 text-red-500"}):null})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 ml-1",children:"Combat Bio"}),e.jsx("textarea",{value:y,onChange:u=>g(u.target.value),className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-4 text-sm font-medium focus:border-teal-500/50 focus:outline-none transition-all h-24 resize-none placeholder:text-zinc-700",placeholder:"Briefing regarding your skills and objectives..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 ml-1 flex items-center gap-2",children:[e.jsx(ve,{size:10})," Region"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("select",{value:v,onChange:u=>b(u.target.value),className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-4 text-sm font-bold focus:border-teal-500/50 focus:outline-none transition-all appearance-none cursor-pointer",children:Tt.map(u=>e.jsx("option",{value:u,children:u},u))}),e.jsx("input",{type:"text",value:j,onChange:u=>w(u.target.value),placeholder:"City / State",className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-4 text-sm font-bold focus:border-teal-500/50 focus:outline-none transition-all"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 ml-1 flex items-center gap-2",children:[e.jsx(ht,{size:10})," Languages (Max 3)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Rt.map(u=>e.jsx("button",{onClick:()=>ne(u),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider border transition-all ${M.includes(u)?"bg-teal-500 text-black border-teal-500":"bg-[#0E1424] text-zinc-500 border-white/5 hover:border-white/20"}`,children:u},u))})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-teal-400 ml-1 flex items-center gap-2",children:[e.jsx($e,{size:12})," Tactical IDs"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["BGMI","Free Fire","Valorant","Minecraft"].map(u=>{const k=u.toLowerCase().replace(" ","");return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-600 ml-1",children:u}),e.jsx("input",{type:"text",value:p[k]||"",onChange:C=>Re(k,C.target.value),className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-3 text-xs font-bold focus:border-teal-500/30 focus:outline-none transition-all placeholder:text-zinc-800",placeholder:"Enter ID"})]},u)})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-purple-400 ml-1 flex items-center gap-2",children:[e.jsx(qe,{size:12})," Comms Uplinks"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["Discord","Twitter","Instagram"].map(u=>{const k=u.toLowerCase();return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-600 ml-1",children:u}),e.jsx("input",{type:"text",value:x[k],onChange:C=>a(q=>({...q,[k]:C.target.value})),className:"w-full bg-[#0E1424] border border-white/5 rounded-xl p-3 text-xs font-bold focus:border-purple-500/30 focus:outline-none transition-all placeholder:text-zinc-800",placeholder:"@handle"})]},u)})})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/20 flex gap-3 backdrop-blur-sm",children:[e.jsx("button",{onClick:s,className:"flex-1 px-6 py-4 bg-white/5 border border-white/5 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-white/10 transition-all text-zinc-400 hover:text-white",children:"Abort"}),e.jsx("button",{onClick:ce,disabled:K||le||D||N==="taken"||N==="invalid",className:"flex-[2] px-6 py-4 bg-teal-500 text-black rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-teal-400 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-[0_0_20px_rgba(20,184,166,0.3)]",children:K?e.jsx(pe,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{size:16})," Save Dossier"]})})]})]})]})})};class Lt{async createTicket(s,t,n){try{if(!t.subject||!t.message)throw new Error("Subject and message are required");if(t.subject.length>200)throw new Error("Subject must be 200 characters or less");if(t.message.length>2e3)throw new Error("Message must be 2000 characters or less");return(await L.post("/api/support/ticket",{firebaseUid:s,userId:n,...t})).data}catch(d){const o=d.response?.data?.message||d.message||"Failed to create support ticket";throw new Error(o)}}async getMyTickets(s,t){try{const n={};return s&&(n.firebaseUid=s),t&&(n.userId=t),(await L.get("/api/support/tickets",{params:n})).data}catch{throw new Error("Failed to fetch support tickets")}}validateTicketData(s){const t=[];return!s.subject||s.subject.trim().length===0?t.push("Subject is required"):s.subject.length>200&&t.push("Subject must be 200 characters or less"),!s.message||s.message.trim().length===0?t.push("Message is required"):s.message.length>2e3&&t.push("Message must be 2000 characters or less"),s.category||t.push("Category is required"),{valid:t.length===0,errors:t}}}const ge=new Lt,At=({isOpen:r,onClose:s,firebaseUid:t,userId:n})=>{const[d,o]=i.useState("General Support"),[m,l]=i.useState(""),[c,y]=i.useState(""),[g,v]=i.useState(!1),b=async w=>{w.preventDefault();const M=ge.validateTicketData({subject:m,message:c,category:d});if(!M.valid){M.errors.forEach(z=>$.error(z));return}v(!0);try{await ge.createTicket(t,{subject:m,message:c,category:d},n),$.success("Support ticket submitted successfully!"),l(""),y(""),o("General Support"),s()}catch(z){$.error(z.message||"Failed to submit support ticket")}finally{v(!1)}},j=()=>{g||(l(""),y(""),o("General Support"),s())};return e.jsx(H,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j,className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs(T.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-[var(--surface)] border border-[var(--border)] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-[var(--border)] flex items-center justify-between bg-gradient-to-r from-[var(--accent)]/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--accent)]/10 flex items-center justify-center",children:e.jsx(me,{size:16,className:"text-[var(--accent)]"})}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-wide text-[var(--text-primary)]",children:"Customer Support"})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-[var(--surface-hover)] rounded-lg transition-colors",disabled:g,children:e.jsx(ie,{size:18})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-[var(--text-secondary)] mb-2",children:"Issue Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Account Help","Report Issue","General Support","Technical Issue","Payment Issue"].map(w=>e.jsx("button",{type:"button",onClick:()=>o(w),disabled:g,className:`px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wide transition-all ${d===w?"bg-[var(--accent)] text-black":"bg-[var(--bg-primary)] text-[var(--text-secondary)] border border-[var(--border)] hover:border-[var(--accent)]/50"}`,children:w},w))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-[var(--text-secondary)] mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:m,onChange:w=>l(w.target.value),className:"w-full px-4 py-3 bg-[var(--bg-primary)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-colors",placeholder:"Brief description of your issue",disabled:g,maxLength:200,required:!0}),e.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1 text-right",children:[m.length,"/200"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wider text-[var(--text-secondary)] mb-2",children:"Message"}),e.jsx("textarea",{value:c,onChange:w=>y(w.target.value),className:"w-full px-4 py-3 bg-[var(--bg-primary)] border border-[var(--border)] rounded-lg text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-colors resize-none",placeholder:"Please provide detailed information about your issue...",rows:5,maxLength:2e3,disabled:g,required:!0}),e.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-1 text-right",children:[c.length,"/2000"]})]}),e.jsx("div",{className:"bg-[var(--accent)]/5 border border-[var(--accent)]/20 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-[var(--text-secondary)] leading-relaxed",children:"Our support team will review your ticket and respond as soon as possible. You'll be able to track your ticket status in your profile."})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:j,disabled:g,className:"flex-1 px-4 py-3 bg-[var(--surface-hover)] rounded-lg text-[var(--text-primary)] font-bold uppercase text-sm tracking-wide hover:bg-[var(--border)] transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!m||!c,className:"flex-1 px-4 py-3 bg-[var(--accent)] rounded-lg text-black font-bold uppercase text-sm tracking-wide hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(De,{size:16,className:"animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{size:16}),"Submit Ticket"]})})]})]})]})})]})})},Pt=r=>{switch(r?.toLowerCase()){case"elite":return"from-yellow-400 via-orange-500 to-red-600";case"pro":return"from-purple-400 to-pink-600";case"diamond":return"from-blue-400 to-cyan-500";case"platinum":return"from-teal-400 to-emerald-500";case"gold":return"from-yellow-300 to-amber-500";case"silver":return"from-slate-300 to-slate-400";default:return"from-stone-500 to-stone-700"}},Ft={freefire:"ðŸ”¥",bgmi:"ðŸŽ¯",valorant:"âš¡",minecraft:"â›ï¸"},Ut=({stats:r,aggregate:s,profile:t,memberSince:n,onEdit:d,onViewTournaments:o,onViewWallet:m,isOwnProfile:l})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#0E1424]/40 border border-white/5 rounded-2xl p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/10 flex items-center justify-center",children:e.jsx(Oe,{className:"text-teal-500",size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Operative Since"}),e.jsx("div",{className:"text-sm font-bold text-white",children:n?new Date(n).toLocaleDateString():"Unknown"})]})]}),l&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:d,className:"flex flex-col items-center justify-center bg-white/5 border border-white/5 hover:bg-white/10 hover:border-teal-500/30 rounded-xl p-2 transition-all group",children:[e.jsx(Te,{size:20,className:"text-zinc-400 group-hover:text-teal-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-zinc-500",children:"Edit Profile"})]}),e.jsxs("button",{onClick:o,className:"flex flex-col items-center justify-center bg-white/5 border border-white/5 hover:bg-white/10 hover:border-teal-500/30 rounded-xl p-2 transition-all group",children:[e.jsx(Be,{size:20,className:"text-zinc-400 group-hover:text-teal-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-zinc-500",children:"My Tournys"})]}),e.jsxs("button",{onClick:m,className:"flex flex-col items-center justify-center bg-white/5 border border-white/5 hover:bg-white/10 hover:border-teal-500/30 rounded-xl p-2 transition-all group",children:[e.jsx(he,{size:20,className:"text-zinc-400 group-hover:text-teal-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-zinc-500",children:"Wallet"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-0 border border-white/5 bg-white/5 rounded-2xl overflow-hidden divide-x divide-white/5",children:[e.jsxs("div",{className:"p-4 text-center group hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-zinc-500 mb-1 text-[10px] font-bold uppercase tracking-wider",children:"Matches"}),e.jsx("div",{className:"text-2xl font-black italic text-white",children:s?.totalMatches||0})]}),e.jsxs("div",{className:"p-4 text-center group hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-zinc-500 mb-1 text-[10px] font-bold uppercase tracking-wider",children:"Win Rate"}),e.jsxs("div",{className:`text-2xl font-black italic ${s?.overallWinRate>50?"text-green-500":"text-yellow-500"}`,children:[s?.overallWinRate||0,"%"]})]}),e.jsxs("div",{className:"p-4 text-center group hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-zinc-500 mb-1 text-[10px] font-bold uppercase tracking-wider",children:"Reputation"}),e.jsxs("div",{className:"text-2xl font-black italic text-teal-400 flex items-center justify-center gap-1",children:["100 ",e.jsx(je,{size:12,fill:"currentColor"})]})]})]}),t?.currentStreak!==void 0&&t?.currentStreak!==0&&e.jsx("div",{className:`p-4 rounded-xl border flex items-center justify-between ${t.currentStreak>0?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.currentStreak>0?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(Ge,{size:20,className:t.currentStreak>0?"text-green-500":"text-red-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider text-zinc-500",children:t.currentStreak>0?"Win Streak":"Loss Streak"}),e.jsxs("div",{className:"text-xl font-black italic text-white",children:[Math.abs(t.currentStreak)," ",Math.abs(t.currentStreak)===1?"Match":"Matches"]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Y,{size:18,className:"text-teal-400"}),e.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-zinc-500",children:"Combat Records"})]}),r&&Object.values(r).map(c=>e.jsxs(T.div,{className:"bg-[#0E1424]/40 border border-white/5 rounded-xl p-5 relative overflow-hidden group hover:border-teal-400/40 transition-all",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[e.jsx("div",{className:"absolute bottom-0 left-0 h-1.5 bg-teal-500/20 w-full",children:e.jsx(T.div,{className:"h-full bg-teal-500",initial:{width:0},animate:{width:`${Math.min((c.rankScore||0)/5e3*100,100)}%`},transition:{duration:1,ease:"easeOut"}})}),e.jsxs("div",{className:"flex justify-between items-center relative z-10 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center text-2xl border border-white/5",children:Ft[c.game]||"ðŸŽ®"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-black uppercase italic tracking-wide text-white capitalize",children:c.game}),e.jsxs("div",{className:`text-sm font-bold bg-gradient-to-r ${Pt(c.currentRank)} bg-clip-text text-transparent`,children:[c.currentRank||"Unranked"," ",e.jsxs("span",{className:"text-zinc-500 text-[0.7rem] font-normal",children:["(",c.rankScore||0," PTS)"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[0.65rem] uppercase tracking-wider text-zinc-500 font-bold",children:"K/D Ratio"}),e.jsx("div",{className:"text-xl font-black italic text-white",children:c.kdRatio||0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center pt-3 border-t border-white/5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[0.65rem] text-zinc-500 font-bold uppercase",children:"Played"}),e.jsx("div",{className:"text-sm font-black text-white",children:c.matchesPlayed||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[0.65rem] text-zinc-500 font-bold uppercase",children:"Won"}),e.jsx("div",{className:"text-sm font-black text-green-500",children:c.matchesWon||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[0.65rem] text-zinc-500 font-bold uppercase",children:"Win %"}),e.jsxs("div",{className:"text-sm font-black text-teal-400",children:[c.winRate||0,"%"]})]})]})]},c.game))]})]}),$t=({profile:r,user:s,onEdit:t,isOwnProfile:n})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#0E1424]/40 border border-white/5 rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500",children:"Personal Intel"}),n&&e.jsx("button",{onClick:t,className:"text-teal-400 hover:text-white transition-colors p-2 -mr-2 -mt-2",children:e.jsx(Te,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-zinc-600",children:"Display Name"}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(xe,{size:14,className:"text-zinc-500"}),s.username]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-zinc-600",children:"Location"}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(ft,{size:14,className:"text-zinc-500"}),r.country||"Unknown Sector"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-zinc-600",children:"Languages"}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(ve,{size:14,className:"text-zinc-500"}),r.languages?.join(", ")||"English"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-zinc-600",children:"Date of Entry"}),e.jsx("div",{className:"text-white font-medium",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500 mb-4",children:"Bio"}),e.jsxs("p",{className:"text-sm text-zinc-300 italic leading-relaxed",children:['"',r.bio||"No bio available.",'"']})]})]}),r.socialLinks&&Object.keys(r.socialLinks).filter(d=>r.socialLinks[d]).length>0&&e.jsxs("div",{className:"bg-[#0E1424]/40 border border-white/5 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500 mb-4",children:"Comms channels"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(r.socialLinks).map(([d,o])=>{if(!o)return null;let m=te;const l=d.toLowerCase();return(l.includes("twitter")||l.includes("x"))&&(m=te),l.includes("instagram")&&(m=te),l.includes("youtube")&&(m=te),e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-white/5 border border-white/5 hover:bg-white/10 transition-colors flex items-center gap-2",children:[e.jsx(m,{size:14,className:"text-teal-400"}),e.jsx("span",{className:"text-xs font-bold uppercase text-white",children:d})]},d)})})]})]}),qt=({userId:r})=>{const s=re(),[t,n]=i.useState([]),[d,o]=i.useState(!0);i.useEffect(()=>{r&&m()},[r]);const m=async()=>{if(r){o(!0);try{const l=await We.getMyTournamentHistory(r);n(l.joined.filter(c=>c.status!=="completed"))}catch{}finally{o(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"hidden"}),e.jsx(T.div,{layout:!0,className:"min-h-[300px]",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-teal-500/10 border-t-teal-500 rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.4em]",children:"Loading..."})]}):t.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-4 md:gap-8",children:e.jsx(H,{mode:"popLayout",children:t.map((l,c)=>e.jsx(He,{tournament:l,index:c,compact:!0},l.id))})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center bg-white/5 rounded-[2.5rem] border border-dashed border-white/5",children:[e.jsx("div",{className:"relative mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-900/40 border border-white/5 flex items-center justify-center",children:e.jsx(Y,{className:"w-8 h-8 text-zinc-900"})})}),e.jsx("h3",{className:"text-sm font-black text-white italic mb-2 tracking-tighter uppercase",children:"No Deployments"}),e.jsx("p",{className:"text-zinc-600 text-[10px] uppercase tracking-[0.2em] max-w-xs mx-auto mb-6",children:"Nothing to report in this sector."}),e.jsx("button",{onClick:()=>s("/tournaments"),className:"px-6 py-3 bg-teal-500/10 border border-teal-500/20 text-teal-400 font-black text-[10px] uppercase tracking-widest rounded-xl hover:bg-teal-500 hover:text-black transition-all",children:"Find Tournaments"})]})})]})},_t=()=>{const{balance:r,addBalance:s}=fe(),[t,n]=i.useState(""),[d,o]=i.useState(!1),m=async()=>{const c=parseInt(t);if(!c||c<1){f.error("Minimum amount is â‚¹1");return}try{o(!0),await s(c),f.success(`Success! Added â‚¹${c} to wallet.`),n("")}catch{f.error("Transaction failed")}finally{o(!1)}},l=[100,500,1e3,2e3];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-teal-900/40 to-black border border-teal-500/20 p-8 shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20",children:e.jsx(he,{size:120,className:"text-teal-500 transform rotate-12"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-teal-400 mb-2",children:"Total Balance"}),e.jsxs("h2",{className:"text-5xl font-black italic tracking-tighter text-white mb-6",children:["â‚¹",r.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-zinc-400 uppercase tracking-wider",children:[e.jsx(Ve,{size:14,className:"text-green-500"}),e.jsx("span",{children:"Secure Combat Wallet â€¢ Instant Credits"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-zinc-500 flex items-center gap-2",children:[e.jsx(Qe,{size:16,className:"text-yellow-400"}),"Quick Top-up"]})}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(c=>e.jsxs("button",{onClick:()=>n(c.toString()),className:"py-3 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 hover:border-teal-500/30 transition-all text-sm font-bold text-zinc-300",children:["â‚¹",c]},c))}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 font-bold",children:"â‚¹"}),e.jsx("input",{type:"number",placeholder:"Enter custom amount",value:t,onChange:c=>n(c.target.value),className:"w-full pl-8 pr-4 py-4 bg-[#0E1424]/40 border border-white/5 rounded-2xl text-white placeholder-zinc-700 focus:outline-none focus:border-teal-500/30 font-bold transition-all"}),e.jsx("button",{onClick:m,disabled:d||!t,className:"absolute right-2 top-2 bottom-2 px-6 rounded-xl bg-teal-500 text-black font-black uppercase text-xs tracking-wider hover:bg-teal-400 disabled:opacity-50 disabled:grayscale transition-all",children:d?"Processing...":"Add"})]}),e.jsx("p",{className:"text-[10px] text-zinc-600 text-center italic",children:"*Secure Payment Gateway (Mock Mode Active)"})]})]})};class Dt{async createTeam(s,t){try{return(await L.post("/api/teams",{userId:s,...t})).data}catch(n){throw n}}async getMyTeams(s){try{return(await L.get(`/api/teams/my/${s}`)).data}catch{return[]}}async deleteTeam(s){try{return await L.delete(`/api/teams/${s}`),!0}catch{return!1}}}const oe=new Dt,Ot=["BGMI","Free Fire","Valorant","Minecraft"],Bt=()=>{const{user:r}=V(),[s,t]=i.useState([]),[n,d]=i.useState(!1),[o,m]=i.useState(""),[l,c]=i.useState("SQUAD"),[y,g]=i.useState("BGMI"),[v,b]=i.useState([""]);i.useEffect(()=>{j()},[r]);const j=async()=>{if(r)try{const a=await oe.getMyTeams(r.uid);t(a)}catch{}finally{}},w=async a=>{confirm("Delete this team?")&&(await oe.deleteTeam(a)?(f.success("Team disbanded"),j()):f.error("Failed to disband team"))},M=async()=>{if(!r)return;if(!o.trim())return f.error("Team name required");const a=v.filter(p=>p.trim().length>0);if(a.length===0&&l!=="SOLO")return f.error("Add at least one player");try{await oe.createTeam(r.uid,{name:o,game:y,type:l,players:a.map(p=>({ign:p}))}),d(!1),z(),f.success("Squad formed successfully"),j()}catch{f.error("Failed to create team")}},z=()=>{m(""),c("SQUAD"),b([""]),g("BGMI")},x=(a,p)=>{const S=[...v];S[a]=p,b(S)};return i.useEffect(()=>{b([""])},[l]),e.jsxs("div",{className:"space-y-6",children:[s.length===0?e.jsxs("div",{className:"text-center py-12 bg-[#0E1424]/40 border border-white/5 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-white/5 border border-dashed border-white/10 flex items-center justify-center mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-zinc-600"})}),e.jsx("h3",{className:"text-base font-black text-white italic uppercase mb-2",children:"No Active Units"}),e.jsx("button",{onClick:()=>d(!0),className:"mt-4 px-6 py-2 bg-teal-500 text-black text-[10px] font-black uppercase tracking-widest rounded-lg hover:bg-teal-400 transition-all",children:"Create Team"})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>d(!0),className:"w-full py-4 border border-dashed border-white/10 rounded-2xl text-zinc-500 hover:text-white hover:border-teal-500/50 hover:bg-teal-500/5 transition-all text-sm font-bold uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx(Ye,{size:16})," New Squad"]}),s.map(a=>e.jsxs("div",{className:"p-5 bg-[#0E1424]/60 border border-white/5 rounded-2xl group hover:border-teal-500/30 transition-all relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>w(a._id),className:"text-red-500 hover:text-red-400",children:e.jsx(Ke,{size:16})})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-zinc-800 to-black border border-white/10 flex items-center justify-center text-xl",children:a.game==="BGMI"?"ðŸ”«":a.game==="Valorant"?"âš”ï¸":a.game==="Free Fire"?"ðŸ”¥":"â›ï¸"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-black text-white italic",children:a.name}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[8px] font-bold uppercase bg-white/10 text-zinc-400",children:a.type})]}),e.jsx("div",{className:"text-[10px] font-bold text-teal-500 uppercase tracking-widest mb-3",children:a.game}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.players.map((p,S)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-black/40 rounded border border-white/5",children:[e.jsx(xe,{size:10,className:"text-zinc-500"}),e.jsx("span",{className:"text-xs text-zinc-300",children:p.ign||"(Empty)"})]},S))})]})]})]},a._id))]}),e.jsx(H,{children:n&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-[#09090b] border border-white/10 rounded-2xl overflow-hidden p-6 space-y-5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white",children:"Assemble Content"}),e.jsx("button",{onClick:()=>d(!1),className:"text-zinc-500 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase",children:"Team Name"}),e.jsx("input",{value:o,onChange:a=>m(a.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white focus:border-teal-500 outline-none",placeholder:"e.g. Delta Force"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase",children:"Game"}),e.jsx("select",{value:y,onChange:a=>g(a.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none",children:Ot.map(a=>e.jsx("option",{value:a,className:"bg-black",children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase",children:"Format"}),e.jsxs("select",{value:l,onChange:a=>c(a.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none",children:[e.jsx("option",{value:"SOLO",className:"bg-black",children:"SOLO"}),e.jsx("option",{value:"DUO",className:"bg-black",children:"DUO"}),e.jsx("option",{value:"SQUAD",className:"bg-black",children:"SQUAD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase mb-2 block",children:"Roster"}),e.jsx("div",{className:"space-y-2",children:Array.from({length:l==="DUO"?2:l==="SQUAD"?4:1}).map((a,p)=>e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{value:v[p]||"",onChange:S=>x(p,S.target.value),className:"flex-1 bg-white/5 border border-white/10 rounded-lg p-2 text-sm text-white focus:border-teal-500 outline-none",placeholder:`Player ${p+1} IGN`})},p))})]})]}),e.jsx("button",{onClick:M,className:"w-full py-3 bg-teal-500 text-black font-black uppercase text-xs tracking-widest rounded-xl hover:bg-teal-400 transition-all",children:"Save Team"})]})})})]})};class Gt{async getMyFriends(s){try{return(await L.get(`/api/friends/list/${s}`)).data}catch{return[]}}async getRequests(){try{return(await L.get("/api/friends/requests")).data}catch{return[]}}async sendRequest(s){try{return(await L.post("/api/friends/request",{targetUsername:s})).data}catch(t){throw t}}async acceptRequest(s){try{return(await L.post("/api/friends/accept",{requesterUid:s})).data}catch(t){throw t}}async rejectRequest(s){try{return(await L.post("/api/friends/reject",{requesterUid:s})).data}catch(t){throw t}}}const _=new Gt,Wt=({onChat:r})=>{const{user:s}=V(),[t,n]=i.useState(""),[d,o]=i.useState([]),[m,l]=i.useState(!1),[c,y]=i.useState([]),[g,v]=i.useState([]);i.useEffect(()=>{b()},[s]);const b=async()=>{if(s)try{const[x,a]=await Promise.all([_.getMyFriends(s.uid),_.getRequests()]);y(x),v(a)}catch{}finally{}},j=async x=>{if(x.preventDefault(),!!t.trim()){l(!0);try{const a=await Ne.searchUsers(t);o(a)}catch{f.error("Search failed")}finally{l(!1)}}},w=async x=>{if(s)try{await _.sendRequest(x),f.success("Request Sent"),n(""),o([])}catch(a){f.error(a.response?.data?.message||"Failed to send request")}},M=async x=>{try{await _.acceptRequest(x),f.success("Ally Accepted"),b()}catch{f.error("Failed to accept")}},z=async x=>{try{await _.rejectRequest(x),f.success("Request Ignored"),b()}catch{f.error("Failed to reject")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:j,className:"relative",children:[e.jsx(ke,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 w-4 h-4"}),e.jsx("input",{type:"text",value:t,onChange:x=>n(x.target.value),placeholder:"Find friends by username...",className:"w-full pl-10 pr-4 py-3 bg-[#0E1424]/40 border border-white/5 rounded-xl text-sm text-white placeholder-zinc-700 focus:outline-none focus:border-teal-500/30 transition-all font-medium"}),t&&e.jsx("button",{type:"submit",className:"absolute right-2 top-2 p-1.5 bg-white/10 hover:bg-teal-500 hover:text-black rounded-lg transition-all text-xs",children:"GO"})]}),m?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-teal-500/20 border-t-teal-500 rounded-full animate-spin"})}):d.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500 pl-2",children:"Found Operatives"}),d.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#0E1424]/60 border border-white/5 rounded-2xl group hover:border-teal-500/20 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:x.username,rank:x.title||"ROOKIE",size:"medium",avatarType:x.avatarType}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:x.username}),e.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-wider",children:x.title||"Recruit"})]})]}),e.jsx("button",{onClick:()=>w(x.username),className:"p-2 bg-white/5 hover:bg-teal-500 hover:text-black rounded-xl transition-all text-zinc-400",children:e.jsx(ae,{size:18})})]},x.uid))]}):t&&!m?e.jsx("div",{className:"text-center py-8 text-zinc-500 text-xs italic",children:"No operatives found with that callsign."}):null,g.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-teal-500 pl-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-pulse"})," Incoming Requests"]}),g.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0E1424]/80 border border-teal-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:x.username,size:"small",rank:"Recruit"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:x.username}),e.jsx("p",{className:"text-[10px] text-zinc-500",children:"Wants to be an ally"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(x.uid),className:"p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-colors",children:e.jsx(ie,{size:14})}),e.jsx("button",{onClick:()=>M(x.uid),className:"p-2 bg-teal-500/10 text-teal-500 rounded-lg hover:bg-teal-500 hover:text-black transition-colors",children:e.jsx(Xe,{size:14})})]})]},x.uid))]}),e.jsxs("div",{className:"pt-6 border-t border-white/5",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500 mb-4 pl-2",children:"Allies Online"}),c.length===0?e.jsxs("div",{className:"text-center py-8 bg-[#0E1424]/20 rounded-2xl border border-dashed border-white/5",children:[e.jsx(Nt,{className:"mx-auto text-zinc-700 mb-2 w-8 h-8"}),e.jsx("p",{className:"text-zinc-600 text-xs uppercase tracking-widest",children:"No Friends Added Yet"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0E1424]/40 border border-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:x.username,rank:x.title||"Rookie",avatarType:x.avatarType,size:"medium"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:x.displayName||x.username}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${x.status==="online"?"bg-green-500":"bg-zinc-600"}`}),e.jsx("span",{className:"text-[10px] text-zinc-500 uppercase tracking-wider",children:x.status||"Offline"})]})]})]}),e.jsx("button",{onClick:()=>r?.(x.username),className:"p-2 bg-white/5 hover:bg-teal-500 hover:text-black rounded-lg transition-all text-zinc-400",children:e.jsx(me,{size:16})})]},x.id))})]})]})},Ht=()=>{const{signOut:r,user:s}=V(),t=re(),n=async()=>{try{await r(),f.success("Logged out successfully"),t("/auth")}catch{f.error("Failed to logout")}},d=[{title:"Account",items:[{icon:ze,label:"Email",value:s?.email,action:()=>{}},{icon:ut,label:"Change Password",action:()=>f("Password change flow coming soon",{icon:"ðŸ”’"})}]},{title:"Preferences",items:[{icon:Se,label:"Notifications",value:"On",action:()=>{}},{icon:ue,label:"Privacy",action:()=>{}}]}];return e.jsxs("div",{className:"space-y-8",children:[d.map(o=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-zinc-500 pl-2",children:o.title}),e.jsx("div",{className:"bg-[#0E1424]/40 border border-white/5 rounded-2xl overflow-hidden",children:o.items.map((m,l)=>e.jsxs("button",{onClick:m.action,className:`w-full flex items-center justify-between p-4 hover:bg-white/5 transition-colors ${l!==o.items.length-1?"border-b border-white/5":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-zinc-400",children:e.jsx(m.icon,{size:16})}),e.jsx("span",{className:"text-sm font-bold text-zinc-200",children:m.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m.value&&e.jsx("span",{className:"text-xs text-zinc-500",children:m.value}),e.jsx(Ce,{size:14,className:"text-zinc-600"})]})]},m.label))})]},o.title)),e.jsxs("button",{onClick:n,className:"w-full py-4 rounded-2xl bg-red-500/10 border border-red-500/20 text-red-500 font-black uppercase text-xs tracking-[0.2em] hover:bg-red-500 hover:text-white transition-all flex items-center justify-center gap-3",children:[e.jsx(Ze,{size:16}),"Logout Session"]}),e.jsxs("div",{className:"text-center pt-8",children:[e.jsx("p",{className:"text-[10px] text-zinc-700 font-mono",children:"VERSION 2.0.0-ALPHA"}),e.jsx("p",{className:"text-[10px] text-zinc-700 font-mono",children:"ESPORIZON SYSTEMS"})]})]})},Vt=()=>{const r=[{icon:me,title:"Live Chat Support",description:"Connect with a support agent for immediate assistance.",action:"Start Chat",color:"text-teal-400",bg:"bg-teal-500/10",border:"border-teal-500/20"},{icon:ct,title:"FAQs & Guides",description:"Browse our knowledge base for quick answers.",action:"Browse Articles",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/20"},{icon:ze,title:"Email Support",description:"Send us a detailed message about your issue.",action:"Send Email",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map((s,t)=>e.jsx("div",{className:`p-6 rounded-2xl border ${s.border} ${s.bg} hover:bg-opacity-20 transition-all group cursor-pointer`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#0a0e1a]/40 flex items-center justify-center border border-white/5",children:e.jsx(s.icon,{size:24,className:s.color})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-wider text-white mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-zinc-400 mb-4 leading-relaxed",children:s.description}),e.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest flex items-center gap-2 ${s.color}`,children:[s.action," ",e.jsx(lt,{size:10})]})]})]})},t))}),e.jsxs("div",{className:"text-center pt-8 border-t border-white/5",children:[e.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:"Still need help?"}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-400 bg-white/5 px-4 py-2 rounded-full",children:["Support ID: ",e.jsx("span",{className:"text-white",children:"USER-882-991"})]})]})]})},se={async getChats(){try{return(await L.get("/api/chats")).data}catch{return[]}},async getChatDetails(r){try{const s=await L.get(`/api/chats/${r}`);return{messages:s.data.messages,chatId:s.data._id}}catch(s){throw s}},async sendMessage(r,s,t){try{return(await L.post("/api/chats/send",{friendId:r,text:s,chatId:t})).data}catch{return null}},async markAsRead(r){try{await L.post("/api/chats/read",{chatId:r})}catch{}}},Qt=({isOpen:r,onClose:s,initialActiveChat:t})=>{const{user:n}=V(),d=re(),[o,m]=i.useState([]),[l,c]=i.useState(null),[y,g]=i.useState(null),[v,b]=i.useState([]),[j,w]=i.useState(""),[M,z]=i.useState(!1),x=i.useRef(null);i.useEffect(()=>{r?(a(),t&&c(t)):c(null)},[r,t]),i.useEffect(()=>{let h;return r&&l?(p(l),h=setInterval(()=>{p(l,!0)},3e3)):r&&(h=setInterval(()=>{a(!0)},5e3)),()=>clearInterval(h)},[r,l]),i.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[v]);const a=async(h=!1)=>{h||z(!0);const R=await se.getChats();m(R),h||z(!1)},p=async(h,R=!1)=>{try{const E=await se.getChatDetails(h);b(E.messages),g(E.chatId),R||se.markAsRead(E.chatId)}catch{}},S=async h=>{if(h.preventDefault(),!j.trim()||!l)return;const R={senderId:n?.uid||"",text:j,createdAt:new Date().toISOString(),readBy:[]};b(Q=>[...Q,R]),w(""),await se.sendMessage(l,R.text,y||void 0)&&p(l,!0)},G=h=>{c(h)},P=()=>{c(null),g(null),a()},U=o.find(h=>h.friendId===l);return e.jsx(H,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100]"}),e.jsx(T.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed inset-y-0 right-0 w-full md:w-[450px] bg-[#0F1420] border-l border-white/10 z-[101] shadow-2xl flex flex-col",children:l?e.jsxs("div",{className:"flex flex-col h-full bg-[#0F1420]",children:[e.jsxs("div",{className:"p-3 border-b border-white/5 flex items-center justify-between bg-[#0a0e1a]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:P,className:"p-2 hover:bg-white/5 rounded-full text-zinc-400",children:e.jsx(Ee,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>d(`/profile/${U?.friendUsername}`),children:[e.jsx(B,{username:U?.friendUsername||"User",rank:U?.friendRank||"Rookie",size:"small"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white leading-none",children:U?.friendName||U?.friendUsername}),e.jsx("span",{className:"text-[10px] text-teal-500 font-medium uppercase tracking-wider",children:"Online"})]})]})]}),e.jsx("button",{className:"p-2 hover:bg-white/5 rounded-full text-zinc-400",children:e.jsx(rt,{size:18})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[v.map((h,R)=>{const E=h.senderId===n?.uid;return e.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`
                                                     max-w-[70%] p-3 rounded-2xl text-sm font-medium
                                                     ${E?"bg-teal-500 text-black rounded-tr-none":"bg-[#1a1f2e] text-zinc-300 border border-white/5 rounded-tl-none"}
                                                 `,children:h.text})},R)}),e.jsx("div",{ref:x})]}),e.jsx("div",{className:"p-4 bg-[#0a0e1a] border-t border-white/5",children:e.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:j,onChange:h=>w(h.target.value),placeholder:"Type a message...",className:"flex-1 bg-[#1a1f2e] border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-teal-500/50 transition-all placeholder:text-zinc-600 font-medium"}),e.jsx("button",{type:"submit",disabled:!j.trim(),className:"p-3 bg-teal-500 text-black rounded-xl hover:bg-teal-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(we,{size:20})})]})})]}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center justify-between bg-[#0a0e1a]",children:[e.jsxs("h2",{className:"text-lg font-black uppercase tracking-wide text-white flex items-center gap-2",children:[e.jsx(Me,{size:20,className:"text-teal-500"}),"Comms Link"]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/5 rounded-full",children:e.jsx(ie,{className:"text-zinc-500",size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:o.length===0&&!M?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-zinc-600",children:e.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",children:"No active comms"})}):o.map(h=>e.jsxs("button",{onClick:()=>G(h.friendId),className:"w-full p-4 hover:bg-white/5 rounded-xl flex items-center gap-4 transition-all group border-b border-white/5 last:border-0",children:[e.jsx(B,{username:h.friendUsername,rank:h.friendRank,size:"medium"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-bold text-white text-sm group-hover:text-teal-400 transition-colors",children:h.friendName||h.friendUsername}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:new Date(h.lastMessageTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("p",{className:`text-xs truncate ${h.unreadCount>0?"text-white font-bold":"text-zinc-500"}`,children:h.lastMessage})]}),h.unreadCount>0&&e.jsx("div",{className:"w-5 h-5 bg-teal-500 rounded-full flex items-center justify-center text-[10px] font-black text-black",children:h.unreadCount})]},h._id))})]})})]})})},Yt=({isOpen:r,onClose:s})=>{const{user:t}=V(),[n,d]=i.useState("requests"),[o,m]=i.useState(""),[l,c]=i.useState([]),[y,g]=i.useState(!1),[v,b]=i.useState([]);i.useEffect(()=>{r&&j()},[r]);const j=async()=>{try{const a=await _.getRequests();b(a)}catch{}},w=async a=>{if(a.preventDefault(),!!o.trim()){g(!0);try{const p=await Ne.searchUsers(o);c(p.filter(S=>S.uid!==t?.uid))}catch{f.error("Search failed")}finally{g(!1)}}},M=async a=>{try{await _.sendRequest(a),f.success(`Request sent to ${a}`)}catch(p){f.error(p.response?.data?.message||"Failed to send")}},z=async a=>{try{await _.acceptRequest(a),f.success("Friend accepted"),b(p=>p.filter(S=>S.uid!==a))}catch{f.error("Failed to accept")}},x=async a=>{try{await _.rejectRequest(a),f.success("Request removed"),b(p=>p.filter(S=>S.uid!==a))}catch{f.error("Failed to reject")}};return e.jsx(H,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100]"}),e.jsxs(T.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed inset-y-0 right-0 w-full md:w-[400px] bg-[#0F1420] border-l border-white/10 z-[101] shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4 bg-[#0a0e1a]",children:[e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:e.jsx(Ee,{className:"text-zinc-400"})}),e.jsx("h2",{className:"text-lg font-black uppercase tracking-wide text-white",children:"Social Hub"})]}),e.jsxs("div",{className:"grid grid-cols-2 p-2 gap-2 bg-[#0a0e1a]",children:[e.jsxs("button",{onClick:()=>d("requests"),className:`py-3 rounded-lg text-xs font-black uppercase tracking-wider transition-all ${n==="requests"?"bg-teal-500 text-black":"bg-[#1a1f2e] text-zinc-500 hover:text-white"}`,children:["Requests ",v.length>0&&`(${v.length})`]}),e.jsx("button",{onClick:()=>d("search"),className:`py-3 rounded-lg text-xs font-black uppercase tracking-wider transition-all ${n==="search"?"bg-teal-500 text-black":"bg-[#1a1f2e] text-zinc-500 hover:text-white"}`,children:"Add Friends"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:n==="requests"?e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-600",children:[e.jsx(ue,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"No Pending Requests"})]}):v.map(a=>e.jsxs("div",{className:"bg-[#1a1f2e] p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:a.username,rank:a.title||"Rookie",size:"small"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:a.username}),e.jsx("p",{className:"text-[10px] text-zinc-500",children:a.title||"Rookie"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(a.uid),className:"px-3 py-1.5 bg-teal-500 text-black text-[10px] font-bold uppercase rounded hover:bg-teal-400",children:"Accept"}),e.jsx("button",{onClick:()=>x(a.uid),className:"px-3 py-1.5 bg-white/5 text-zinc-400 text-[10px] font-bold uppercase rounded hover:bg-white/10",children:"Ignore"})]})]},a.uid))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("form",{onSubmit:w,className:"relative",children:[e.jsx("input",{type:"text",value:o,onChange:a=>m(a.target.value),placeholder:"Search by username...",className:"w-full bg-[#1a1f2e] border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-teal-500/50"}),e.jsx(ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500 w-4 h-4"})]}),y?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-teal-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[l.map(a=>e.jsxs("div",{className:"bg-[#1a1f2e] p-3 rounded-xl border border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:a.username,rank:a.title||"Player",avatarType:a.avatarType,size:"small"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:a.username}),e.jsx("p",{className:"text-[10px] text-zinc-500",children:a.title||"Player"})]})]}),e.jsx("button",{onClick:()=>M(a.username),className:"p-2 bg-white/5 hover:bg-teal-500 hover:text-black rounded-lg transition-colors text-zinc-400",children:e.jsx(ae,{size:16})})]},a.uid)),o&&l.length===0&&!y&&e.jsx("div",{className:"text-center py-8 text-zinc-600 text-xs",children:"No operatives found"})]})]})})]})]})})},$s=()=>{const{user:r}=V(),{userId:s}=Ae(),t=re(),{balance:n}=fe(),d=s||r?.uid,[o,m]=i.useState(null),[l,c]=i.useState(!0),[y,g]=i.useState(null),[v,b]=i.useState(!1),[j,w]=i.useState(null),[M,z]=i.useState(!1),[x,a]=i.useState(!1),[p,S]=i.useState(!1),G=N=>{N&&w(N),b(!0)},[P,I]=i.useState("hub"),U=async()=>{if(!d){c(!1);return}try{c(!0);let N;if(r&&(!s||s===r.uid)?N=await de.getMyProfile(r.uid,r.id):N=await de.getProfileByUserId(d),!N)throw new Error("Profile not found");m(N),g(null)}catch{g("Could not load profile data.")}finally{c(!1)}};i.useEffect(()=>{U()},[d]);const h=r?.uid===o?.user?.firebaseUid||!s&&!!r;if(l)return e.jsx("div",{className:"min-h-screen bg-[#0a0e1a] flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-teal-500/20 border-t-teal-500 rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-teal-500 animate-pulse",children:"Initializing Hub..."})]})});if(y||!o)return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mb-6",children:e.jsx(Y,{className:"w-10 h-10 text-red-500 opacity-50"})}),e.jsx("h2",{className:"text-xl font-black text-white uppercase italic tracking-tighter mb-2",children:"Profile Data Restricted"}),e.jsx("p",{className:"text-zinc-500 text-xs font-bold uppercase tracking-widest max-w-xs mb-8 leading-relaxed",children:"We couldn't retrieve profile details for this operative. Please ensure your connection is secure."}),e.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[e.jsx("button",{onClick:()=>U(),className:"py-4 bg-teal-500 text-black rounded-2xl font-black text-xs uppercase tracking-[0.2em] shadow-lg shadow-teal-500/20 active:scale-95",children:"Retry Protocol"}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"py-4 bg-white/5 text-zinc-400 rounded-2xl font-black text-xs uppercase tracking-[0.2em] border border-white/5 hover:text-white transition-all",children:"Return to Base"})]})]});const{profile:R,user:E,stats:Q,aggregate:K}=o,Z=()=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{username:E.username,rank:R.title,avatarType:R.avatarType||"initials",size:"medium",showBadge:!1,className:"ring-2 ring-white/10 rounded-full shadow-lg"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-black uppercase tracking-wide text-white flex items-center gap-2 leading-none",children:[E.username,e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]",title:"Online"})]}),e.jsxs("button",{onClick:()=>I("profile"),className:"text-[10px] font-bold text-teal-500 hover:text-teal-400 uppercase tracking-wider flex items-center gap-1 mt-1 transition-colors",children:["View Profile ",e.jsx(Ce,{size:10})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>G(),className:"p-2.5 bg-white/5 rounded-full text-zinc-400 hover:text-white hover:bg-white/10 transition-all relative",children:[e.jsx(Me,{size:20}),e.jsx("span",{className:"absolute top-2 right-2.5 w-1.5 h-1.5 bg-teal-500 rounded-full border border-[#0a0e1a] animate-pulse"})]}),e.jsx("button",{onClick:()=>z(!0),className:"p-2.5 bg-white/5 rounded-full text-zinc-400 hover:text-white hover:bg-white/10 transition-all relative",children:e.jsx(ae,{size:20})}),e.jsx("button",{onClick:()=>f("No new notifications"),className:"p-2.5 bg-white/5 rounded-full text-zinc-400 hover:text-white hover:bg-white/10 transition-all",children:e.jsx(Se,{size:20})})]})]}),le=()=>e.jsxs("div",{className:"bg-gradient-to-br from-[#1a1f2e] to-[#141925] border border-white/5 rounded-2xl p-6 relative overflow-hidden shadow-xl group",children:[e.jsx("div",{className:"absolute -right-4 -bottom-4 opacity-[0.03] group-hover:opacity-[0.05] transition-opacity",children:e.jsx(he,{size:120,className:"transform -rotate-12"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500",children:"Total Balance"})}),e.jsxs("h1",{className:"text-4xl font-black italic tracking-tighter text-white mb-6 flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl text-zinc-500 font-normal not-italic",children:"â‚¬"}),n.toFixed(2)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>I("wallet"),className:"py-3 bg-teal-500 hover:bg-teal-400 text-black rounded-xl font-black text-xs uppercase tracking-wider transition-all shadow-lg shadow-teal-500/20 active:scale-95",children:"Add Funds"}),e.jsxs("div",{className:"relative group/tooltip",children:[e.jsx("button",{disabled:!0,className:"w-full py-3 bg-white/5 text-zinc-500 rounded-xl font-black text-xs uppercase tracking-wider border border-white/5 cursor-not-allowed",children:"Withdraw"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-[10px] rounded opacity-0 group-hover/tooltip:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Coming Soon"})]})]})]})]}),X=()=>e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(D,{icon:Y,label:"Tournaments",subtitle:"Active Engagements",onClick:()=>I("tournaments"),delay:.1,color:"text-yellow-500"}),e.jsx(D,{icon:ye,label:"My Teams",subtitle:"Manage Rosters",onClick:()=>I("teams"),delay:.2,color:"text-blue-500"}),e.jsx(D,{icon:ae,label:"Friends",subtitle:"Social Connections",onClick:()=>I("friends"),delay:.3,color:"text-pink-500"}),e.jsx(D,{icon:Je,label:"Settings",subtitle:"Preferences",onClick:()=>I("settings"),delay:.4}),e.jsx(D,{icon:st,label:"Help Center",subtitle:"Support & FAQs",onClick:()=>I("help"),delay:.5,fullWidth:!0})]}),D=({icon:N,label:W,subtitle:O,onClick:J,delay:ee,color:ne="text-zinc-400",fullWidth:ce})=>e.jsxs(T.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:ee,duration:.3},onClick:J,className:`
                group relative overflow-hidden
                bg-[#1a1f2e] border border-white/5 rounded-2xl
                hover:bg-[#23293a] hover:border-white/10 transition-all
                text-left p-4
                ${ce?"col-span-2 flex items-center gap-4":"flex flex-col items-start gap-4"}
            `,children:[e.jsx("div",{className:`
                p-3 rounded-xl bg-white/5 ${ne} 
                group-hover:scale-110 group-hover:bg-white/10 transition-all
            `,children:e.jsx(N,{size:22,className:"stroke-[1.5]"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-sm font-bold text-white group-hover:text-teal-400 transition-colors leading-tight",children:W}),O&&e.jsx("div",{className:"text-[10px] text-zinc-500 font-medium mt-1 group-hover:text-zinc-400 transition-colors",children:O})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),F=({children:N,title:W,subtitle:O})=>e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] pb-24 animate-in fade-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"sticky top-0 z-50 bg-[#0a0e1a]/95 backdrop-blur-xl border-b border-white/5 px-4 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>I("hub"),className:"p-2 hover:bg-white/5 rounded-full transition-colors text-zinc-400 hover:text-white",children:e.jsx(et,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-white leading-none",children:W}),O&&e.jsx("p",{className:"text-[10px] uppercase font-bold text-zinc-500 tracking-wider mt-0.5",children:O})]})]}),e.jsx("div",{className:"p-5",children:N})]});return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] text-white overflow-x-hidden font-sans pb-24",children:[e.jsx(Le,{position:"top-center"}),e.jsx(H,{mode:"wait",children:P==="hub"?e.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-20},className:"px-5 py-6 space-y-8",children:[e.jsx(Z,{}),e.jsx(le,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500 mb-4 px-1",children:"Menu"}),e.jsx(X,{})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[9px] font-bold text-zinc-700 uppercase tracking-widest",children:"Esporizon Mobile v2.1.0"})})]},"hub"):e.jsxs("div",{children:[P==="profile"&&e.jsxs(F,{title:"My Profile",subtitle:"Edit & Preview",children:[e.jsx($t,{profile:R,user:E,onEdit:()=>a(!0),isOwnProfile:h}),e.jsx("div",{className:"mt-8 border-t border-white/5 pt-8",children:e.jsx(Ut,{stats:Q,aggregate:K,profile:R,memberSince:E.createdAt,onEdit:()=>a(!0),onViewTournaments:()=>I("tournaments"),onViewWallet:()=>I("wallet"),isOwnProfile:h})})]},"profile"),P==="tournaments"&&e.jsx(F,{title:"My Tournaments",subtitle:"Active Engagements",children:e.jsx(qt,{userId:d})},"tournaments"),P==="wallet"&&e.jsx(F,{title:"Combat Wallet",subtitle:"Funds & Transactions",children:e.jsx(_t,{})},"wallet"),P==="teams"&&e.jsx(F,{title:"My Teams",subtitle:"Manage Rosters",children:e.jsx(Bt,{})},"teams"),P==="friends"&&e.jsx(F,{title:"Friends",subtitle:"Social Connections",children:e.jsx(Wt,{onChat:G})},"friends"),P==="settings"&&e.jsx(F,{title:"Settings",subtitle:"App Preferences",children:e.jsx(Ht,{})},"settings"),P==="help"&&e.jsx(F,{title:"Help Center",subtitle:"Support & FAQ",children:e.jsx(Vt,{})},"help")]},"subview")}),e.jsx(Qt,{isOpen:v,onClose:()=>{b(!1),w(null)},initialActiveChat:j}),e.jsx(Yt,{isOpen:M,onClose:()=>z(!1)}),h&&e.jsxs(e.Fragment,{children:[e.jsx(It,{isOpen:x,onClose:()=>a(!1),profile:{...o.profile,username:o.user.username},user:r,onSave:()=>{U(),a(!1),f.success("Profile updated")}}),e.jsx(At,{isOpen:p,onClose:()=>S(!1),firebaseUid:r?.uid||"",userId:o?.user?.id})]})]})};export{$s as default};
