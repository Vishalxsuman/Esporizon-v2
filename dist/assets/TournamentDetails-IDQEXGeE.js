import{c as w,u as C,j as e}from"./index--b10zKEF.js";import{e as E,r as i,L as M}from"./react-vendor-wpuS94OW.js";import{t as l}from"./TournamentService-B8OpG07i.js";import{F as J,z as o}from"./index-CNUiO53a.js";import{m as x}from"./animation-vendor-DcM-v-LS.js";import{T as j}from"./trophy-BGopWeg1.js";import{U as N}from"./users-BZz0W578.js";import{C as v}from"./calendar-Bv4U2JMU.js";import{C as U}from"./clock-Bk-93DQH.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$=w("dollar-sign",A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],q=w("map-pin",_),V=()=>{const{id:n}=E(),{user:r}=C(),[s,D]=i.useState(null),[f,u]=i.useState([]),[k,T]=i.useState(!0),[c,d]=i.useState(!1),[y,p]=i.useState(!1);i.useEffect(()=>{if(!n)return;(async()=>{try{const m=(await l.getTournaments()).find(h=>h.id===n);m&&D(m)}catch(t){console.error("Failed to load tournament:",t)}finally{T(!1)}})()},[n]),i.useEffect(()=>{n&&l.getParticipants(n).then(a=>{if(u(a),r){const t=a.some(m=>m.players.some(h=>h.userId===r.uid));p(t)}})},[n,r]);const F=async()=>{if(!r){o.error("Please sign in to join tournaments");return}if(!s)return;const a=window.prompt("Enter your Team Name (Optional):",r.displayName||"My Team");d(!0);try{console.log("Joining tournament:",n,"User:",r.id),await l.joinTournament(n,{teamName:a||(r.displayName?`${r.displayName}'s Team`:"Anonymous Team"),players:[{userId:r.id||r.uid||"",userName:r.displayName||"Unknown",role:"leader"}]}),o.success("Successfully joined tournament!",{icon:"ðŸŽ‰",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(16px)",border:"1px solid rgba(0, 255, 194, 0.3)",color:"#fff"}}),p(!0);const t=await l.getParticipants(n);u(t)}catch(t){console.error("Join failed:",t),o.error(t instanceof Error?t.message:"Failed to join tournament",{icon:"âŒ",duration:5e3,style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 75, 43, 0.3)",color:"#fff"}})}finally{d(!1)}},P=async()=>{if(!(!r||!s||!window.confirm("Are you sure you want to leave? Your entry fee will be refunded."))){d(!0);try{await l.leaveTournament(n),o.success("Left tournament. Entry fee refunded.",{icon:"âœ…",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(16px)",border:"1px solid rgba(0, 255, 194, 0.3)",color:"#fff"}}),p(!1);const t=await l.getParticipants(n);u(t)}catch(t){o.error(t instanceof Error?t.message:"Failed to leave tournament",{icon:"âŒ"})}finally{d(!1)}}},g=a=>{if(!a)return"TBA";const t=typeof a=="string"?new Date(a):a.toDate?a.toDate():new Date(a);return new Intl.DateTimeFormat("en-IN",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)};if(k||!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"#09090b"},children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2",style:{borderColor:"#00ffc2"}})});const L=s.currentTeams>=s.maxTeams,S=s.registrationDeadline?typeof s.registrationDeadline=="string"?new Date(s.registrationDeadline):new Date(s.registrationDeadline):new Date,b=new Date>S,z=!y&&!L&&!b&&s.status==="upcoming";return e.jsxs("div",{className:"min-h-screen py-6 px-4",style:{background:"#09090b"},children:[e.jsx(J,{position:"top-center"}),e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsxs(M,{to:`/tournaments/${s.gameId}`,className:"text-sm text-gray-400 hover:text-white mb-2 inline-block",children:["â† Back to ",s.gameName," Tournaments"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.status==="upcoming"?"bg-blue-500/20 text-blue-400":s.status==="ongoing"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:s.status.toUpperCase()}),e.jsx("span",{className:"text-sm font-medium uppercase",style:{color:"#00ffc2"},children:s.format})]})]}),e.jsxs("div",{className:"flex gap-3",children:[z&&e.jsx("button",{onClick:F,disabled:c,className:"px-6 py-3 rounded-lg font-bold transition-all disabled:opacity-50",style:{background:"linear-gradient(135deg, #00ffc2 0%, #7c3aed 100%)",color:"#09090b"},children:c?"Joining...":`Join (â‚¹${s.entryFee})`}),y&&!b&&e.jsx("button",{onClick:P,disabled:c,className:"px-6 py-3 glass-card-premium font-bold hover:bg-red-500/20 transition-all",children:c?"Leaving...":"Leave Tournament"})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"glass-card-premium",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(j,{className:"w-4 h-4",style:{color:"#00ffc2"}}),e.jsx("p",{className:"text-xs text-gray-400",children:"Prize Pool"})]}),e.jsxs("p",{className:"text-2xl font-bold",style:{color:"#00ffc2"},children:["â‚¹",s.prizePool.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"glass-card-premium",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($,{className:"w-4 h-4",style:{color:"#00ffc2"}}),e.jsx("p",{className:"text-xs text-gray-400",children:"Entry Fee"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:["â‚¹",s.entryFee]})]}),e.jsxs("div",{className:"glass-card-premium",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(N,{className:"w-4 h-4",style:{color:"#00ffc2"}}),e.jsx("p",{className:"text-xs text-gray-400",children:"Teams"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.currentTeams,"/",s.maxTeams]})]}),e.jsxs("div",{className:"glass-card-premium",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(v,{className:"w-4 h-4",style:{color:"#00ffc2"}}),e.jsx("p",{className:"text-xs text-gray-400",children:"Matches"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.totalMatches})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card-premium mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"About"}),e.jsx("p",{className:"text-gray-300 mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-5 h-5",style:{color:"#00ffc2"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Start Date"}),e.jsx("p",{className:"font-semibold",children:g(s.startDate)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5",style:{color:"#00ffc2"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Registration Deadline"}),e.jsx("p",{className:"font-semibold",children:g(s.registrationDeadline)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5",style:{color:"#00ffc2"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Map/Mode"}),e.jsx("p",{className:"font-semibold",children:s.mapMode})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5",style:{color:"#00ffc2"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Prize Distribution"}),e.jsxs("p",{className:"font-semibold",children:[s.prizeDistribution.first,"% / ",s.prizeDistribution.second,"% / ",s.prizeDistribution.third,"%"]})]})]})]})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card-premium",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Participants (",f.length,")"]}),f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"No participants yet. Be the first to join!"})]}):e.jsx("div",{className:"space-y-2",children:f.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",style:{background:"linear-gradient(135deg, #00ffc2 0%, #7c3aed 100%)",color:"#09090b"},children:t+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.teamName||a.players[0]?.userName||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[a.players.length," ",a.players.length===1?"player":"players"]})]})]}),r?.uid===a.players[0]?.userId&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold",style:{background:"#00ffc2",color:"#09090b"},children:"YOU"})]},a.id))})]})]})]})};export{V as default};
