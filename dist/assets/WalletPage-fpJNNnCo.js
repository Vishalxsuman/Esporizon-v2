import{c as f,u as k,j as e,i as m,z as o}from"./index-BI1Zh8jC.js";import{r as l}from"./react-vendor-wpuS94OW.js";import{u as C}from"./UserService-Ba7STw_o.js";import{W as S}from"./WalletModal-CNr1Oc6H.js";import{C as E}from"./chevron-right-LsW6WU4n.js";import{S as I}from"./shield-check-BcfqPY-Y.js";import{m as u}from"./animation-vendor-DcM-v-LS.js";import{P as z}from"./plus-CYFQFGLI.js";import{H as W}from"./history-Hi7LISke.js";import{C as P}from"./check-DZgxOBsh.js";import{C as T}from"./copy-DBKlyRm1.js";import"./x-TGG6ZPAc.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],A=f("arrow-up-right",_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],M=f("gift",R),K=()=>{const{user:t}=k(),[b,x]=l.useState(null),[i,j]=l.useState(null),[v,p]=l.useState([]),[n,d]=l.useState(null),[h,g]=l.useState(!1);l.useEffect(()=>{if(!t)return;(async()=>{const s=t?.id||t?.uid;if(s)try{const r=await m.getWallet(s);x(r??{balance:0,espoCoins:0,transactions:[]}),p(r?.transactions??[]);const w=await C.getProfile();j(w)}catch{x({balance:0,espoCoins:0,transactions:[]}),p([])}})();const c=s=>{const r=s.detail;r&&(x(r),p(r.transactions))};return window.addEventListener("walletUpdate",c),()=>{window.removeEventListener("walletUpdate",c)}},[t]);const N=async a=>{const c=t?.id||t?.uid;if(!(!c||!n))try{n==="add"?(await m.addFunds(a,c),o.success(`₹${a} Added to Deployment Fund`)):(await m.withdrawFunds(a,c,{method:"default"}),o.success(`Withdrawal Request of ₹${a} Submitted`)),d(null)}catch(s){o.error(s instanceof Error?s.message:"Action failed")}},y=()=>{i?.referralCode&&(navigator.clipboard.writeText(i.referralCode),g(!0),o.success("Referral Code Copied!"),setTimeout(()=>g(!1),2e3))};return e.jsxs("div",{className:"min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] pb-24 transition-colors duration-300",children:[e.jsxs("div",{className:"sticky top-0 z-30 bg-[var(--bg-primary)]/80 backdrop-blur-xl border-b border-[var(--border)] p-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-[var(--glass)] rounded-xl transition-all",children:e.jsx(E,{className:"rotate-180",size:24})}),e.jsxs("h1",{className:"text-sm font-black uppercase tracking-widest italic flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-[var(--accent)]"}),"Combat Wallet"]}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsxs("div",{className:"max-w-xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--surface)] to-[var(--bg-secondary)] p-8 rounded-[2.5rem] border border-[var(--border)] shadow-2xl",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-secondary)] mb-4 block",children:"Total Available Balance"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#fbbf24]/20 p-2 border border-[#fbbf24]/20",children:e.jsx("img",{src:"/Images/espo.png",alt:"ESPO",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-5xl font-black tracking-tighter italic",children:["₹",b?.balance?.toLocaleString()||"0"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-10",children:[e.jsxs("div",{className:"p-4 bg-[var(--glass)] rounded-3xl border border-[var(--border)]",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] mb-1",children:"Pending Withdrawals"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#fbbf24]/20 p-0.5",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full grayscale"})}),e.jsx("span",{className:"text-lg font-black italic",children:"₹0.00"})]})]}),e.jsxs("div",{className:"p-4 bg-[var(--glass)] rounded-3xl border border-[var(--border)]",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] mb-1",children:"Total Career Earnings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[var(--accent)]/20 p-0.5",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full"})}),e.jsxs("span",{className:"text-lg font-black italic text-[var(--accent)]",children:["₹",i?.totalEarnings?.toLocaleString()||"0"]})]})]})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#00ffc2]/5 blur-[100px] -mr-32 -mt-32 rounded-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(u.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d("add"),className:"group flex items-center justify-between p-6 bg-[var(--glass)] border border-[var(--border)] rounded-3xl hover:border-[var(--accent)]/30 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-[var(--accent)]/10 rounded-2xl flex items-center justify-center p-3",children:e.jsx("img",{src:"/Images/addcoin.png",alt:"Buy",className:"w-full h-full object-contain filter drop-shadow-[0_0_8px_rgba(0,255,194,0.5)]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black uppercase tracking-widest text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors",children:"Buy ESPO Coins"}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:"Purchase combat currency instantly"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-[var(--glass)] text-[var(--text-secondary)]/20 group-hover:text-[var(--text-primary)] transition-colors",children:e.jsx(z,{size:20})})]}),e.jsxs(u.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d("withdraw"),className:"group flex items-center justify-between p-6 bg-[var(--glass)] border border-[var(--border)] rounded-3xl hover:border-[#fbbf24]/30 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-[#fbbf24]/10 rounded-2xl flex items-center justify-center p-3",children:e.jsx("img",{src:"/Images/withdraw.png",alt:"Withdraw",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black uppercase tracking-widest text-[var(--text-primary)] group-hover:text-[#fbbf24] transition-colors",children:"Withdraw Credits"}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:"Min. 50 ESPO coins required"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-[var(--glass)] text-[var(--text-secondary)]/20 group-hover:text-[var(--text-primary)] transition-colors",children:e.jsx(A,{size:20})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"text-[var(--text-secondary)]",size:16}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-secondary)]",children:"Operation Records"})]}),e.jsx("button",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--accent)]",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:v.length===0?e.jsx("div",{className:"p-12 text-center bg-[var(--glass)] border border-dashed border-[var(--border)] rounded-[2rem]",children:e.jsx("p",{className:"text-[var(--text-secondary)] text-sm font-medium",children:"No logistical operations detected."})}):v.slice(0,3).map(a=>e.jsxs("div",{className:"p-5 bg-[var(--glass)] border border-[var(--border)] rounded-3xl flex items-center justify-between group hover:border-[var(--border)]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${a.type==="add"?"bg-[var(--accent)]/10":"bg-red-500/10"}`,children:e.jsx("div",{className:"w-6 h-6 p-1 border rounded-lg border-[var(--border)] flex items-center justify-center bg-black/50",children:e.jsx("img",{src:"/Images/logo.png",className:"w-full h-full opacity-40"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-wide group-hover:text-[var(--accent)] transition-colors",children:a.description}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:new Date(a.timestamp).toLocaleDateString()})]})]}),e.jsxs("div",{className:`text-lg font-black italic tracking-tighter ${a.type==="add"?"text-[var(--accent)]":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs mr-2 relative top-[-4px]",children:e.jsx("img",{src:"/Images/espo.png",className:`w-4 h-4 inline-block ${a.type!=="add"&&"grayscale opacity-50"}`})}),a.type==="add"?"+":"-",a.amount.toFixed(2)]})]},a.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(M,{className:"text-[var(--accent)]",size:16}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Strategic Recruitment"})]}),e.jsxs("div",{className:"bg-[var(--accent)]/5 border border-[var(--accent)]/10 p-8 rounded-[2.5rem] space-y-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] block mb-2",children:"Total Referral Earnings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#fbbf24]/20 p-1 rounded-full border border-[#fbbf24]/20",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full object-contain"})}),e.jsxs("span",{className:"text-2xl font-black italic tracking-tighter text-[var(--text-primary)]",children:["₹",i?.referralEarnings?.toFixed(2)||"0.00"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-[var(--accent)]/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative flex items-center justify-between p-4 bg-black/60 border border-[var(--border)] rounded-2xl",children:[e.jsx("span",{className:"text-sm font-black italic tracking-widest text-[var(--accent)] selection:bg-[var(--accent)]/20",children:i?.referralCode||"LOADING..."}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-[var(--accent)] text-[var(--bg-primary)] text-[10px] font-black uppercase tracking-widest rounded-xl hover:scale-105 active:scale-95 transition-all shadow-[0_5px_15px_rgba(0,255,194,0.2)]",children:[h?e.jsx(P,{size:14}):e.jsx(T,{size:14}),h?"Copied":"Copy Code"]})]})]})]})]})]}),e.jsx(S,{isOpen:n!==null,onClose:()=>d(null),type:n||"add",currentBalance:b?.balance||0,onSubmit:N})]})};export{K as default};
