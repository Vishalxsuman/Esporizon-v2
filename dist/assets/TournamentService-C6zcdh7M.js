import{v as i,k as s}from"./index-BI1Zh8jC.js";class m{async getTournaments(t,a){try{await i();const e={};return t&&(e.game=t),a&&(e.status=a),((await s.get("/api/tournaments",{params:e}))?.data?.data||[]).map(o=>({...o,id:o._id||o.id,title:o.name||o.title,currentTeams:o.registeredPlayers?.length||0,maxTeams:o.maxSlots||o.maxTeams||100,gameName:o.game?.toUpperCase()||"UNKNOWN",entryFee:o.entryFee||0,prizePool:o.prizePool||0,status:o.status||"upcoming"}))}catch{return[]}}async getTournament(t){try{const a=await s.get(`/api/tournaments/${t}`),e=a?.data?.data||a?.data;return e?{...e,id:e._id||e.id,title:e.name||e.title,currentTeams:e.registeredPlayers?.length||0,maxTeams:e.maxSlots||e.maxTeams||100,gameName:e.game?.toUpperCase()||"UNKNOWN",entryFee:e.entryFee||0,prizePool:e.prizePool||0,startDate:e.startTime||e.startDate,status:e.status||"upcoming",organizerName:e.hostName||e.organizerName||"Host",organizerId:e.hostId||e.createdBy}:null}catch{return null}}async getTournamentResults(t){try{return(await s.get(`/api/tournaments/${t}/results`))?.data??null}catch{return null}}async getParticipants(t){try{return(await s.get(`/api/tournaments/${t}/participants`))?.data?.data||[]}catch{return[]}}async getRoomDetails(t){try{return(await s.get(`/api/tournaments/${t}/room-details`))?.data??null}catch{return null}}async joinTournament(t,a){try{return await i(),(await s.post(`/api/tournaments/${t}/register`,{teamName:a.teamName,players:a.players}))?.data}catch(e){const r=e.response?.data?.message||"Failed to join tournament";throw new Error(r)}}async leaveTournament(t){try{await i(),await s.delete(`/api/tournaments/${t}/register`)}catch(a){const e=a.response?.data?.message||"Failed to leave tournament";throw new Error(e)}}async createTournament(t){try{await i();const a={...t,status:"upcoming"};return(await s.post("/api/tournaments",a))?.data}catch(a){a.response?.data?.message;const e=a.response?.data?.message||"Failed to create tournament";throw new Error(e)}}async updateTournamentStatus(t,a){try{await s.patch(`/api/tournaments/${t}/status`,{status:a})}catch(e){const r=e.response?.data?.message||"Failed to update status";throw new Error(r)}}async deleteTournament(t){try{await s.delete(`/api/tournaments/${t}`)}catch(a){const e=a.response?.data?.message||"Failed to delete tournament";throw new Error(e)}}async getOrganizerTournaments(t){try{return await i(),((await s.get("/api/tournaments",{params:{organizerId:t}}))?.data?.data||[]).map(r=>({...r,id:r._id||r.id,title:r.name||r.title,currentTeams:r.registeredPlayers?.length||0,maxTeams:r.maxSlots||r.maxTeams||100,gameName:r.game?.toUpperCase()||"UNKNOWN",entryFee:r.entryFee||0,prizePool:r.prizePool||0,status:r.status||"upcoming"}))}catch{return[]}}async getChatMessages(t){try{return(await s.get(`/api/tournaments/${t}/chat`))?.data?.data||[]}catch{return null}}async sendChatMessage(t,a){try{await s.post(`/api/tournaments/${t}/chat`,{message:a})}catch(e){throw e}}async pinMessage(t,a){try{await s.patch(`/api/tournaments/${t}/chat/${a}/pin`)}catch(e){throw e}}async updateRoomDetails(t,a){try{await s.post(`/api/tournaments/${t}/room-details`,a)}catch(e){throw e}}async getJoinStatus(t){try{return await i(),(await s.get(`/api/tournaments/${t}/join-status`))?.data||{joined:!1}}catch{return{joined:!1}}}async getMyTournamentHistory(t){try{await i();const e=(await s.get(`/api/tournaments/user/${t}/history`))?.data?.data||{joined:[],hosted:[]},r=n=>({...n,id:n._id||n.id,title:n.name||n.title,currentTeams:n.registeredPlayers?.length||0,maxTeams:n.maxSlots||n.maxTeams||100,gameName:(n.gameName||n.game||"UNKNOWN").toUpperCase(),entryFee:n.entryFee||0,prizePool:n.prizePool||0,status:n.status||"upcoming"});return{joined:(e.joined||[]).map(r),hosted:(e.hosted||[]).map(r)}}catch{return{joined:[],hosted:[]}}}async publishResults(t,a){try{await s.post(`/api/tournaments/${t}/results`,{results:a})}catch(e){const r=e.response?.data?.message||"Failed to publish results";throw new Error(r)}}async updateLiveStream(t,a){try{await s.patch(`/api/tournaments/${t}/live-stream`,a)}catch(e){const r=e.response?.data?.message||"Failed to update live stream";throw new Error(r)}}}const u=new m;export{u as t};
