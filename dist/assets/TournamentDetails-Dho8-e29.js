import{c as R,j as e,u as W,h as Y,T as M,z,F as se}from"./index-BI1Zh8jC.js";import{r as l,d as H,e as ae}from"./react-vendor-wpuS94OW.js";import{t as C}from"./TournamentService-C6zcdh7M.js";import{A as V,m as E}from"./animation-vendor-DcM-v-LS.js";import{X as K}from"./x-TGG6ZPAc.js";import{S as I}from"./shield-UrmeYB5b.js";import{C as Q}from"./clock-BatA4oMZ.js";import{I as U,M as X}from"./map-C34f4VT9.js";import{C as O}from"./check-DZgxOBsh.js";import{C as B}from"./copy-DBKlyRm1.js";import{C as re,P as le}from"./ProfileService-CPlCF0Q6.js";import{D as ie}from"./dollar-sign-CamqD4A6.js";import{U as _}from"./users-Doj8e7tS.js";import{L as ce}from"./lock-Cscx1y43.js";import{T as ne}from"./TournamentChatRoom-qCWcG3Zr.js";import{C as oe}from"./chevron-right-LsW6WU4n.js";import{A as de}from"./arrow-left-CF79Ni4S.js";import{M as G}from"./message-square-BC04dgYS.js";import"./loader-circle-DGd37Dy2.js";import"./send-BLDoqAZd.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],me=R("banknote",xe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],pe=R("list-ordered",he);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ue=R("server",be);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ge=R("triangle-alert",fe),je=({isOpen:r,onClose:i,roomDetails:s,tournamentName:u,startTime:t})=>{const[d,f]=l.useState({}),[x,g]=l.useState("");l.useEffect(()=>{const o=setInterval(()=>{const m=new Date().getTime(),h=new Date(t).getTime()-m;if(h<=0)g("Match Started!"),clearInterval(o);else{const y=Math.floor(h%36e5/6e4),v=Math.floor(h%(1e3*60)/1e3);g(`${y}m ${v}s`)}},1e3);return()=>clearInterval(o)},[t]);const j=(o,m)=>{navigator.clipboard.writeText(o),f({...d,[m]:!0}),setTimeout(()=>f({...d,[m]:!1}),2e3)};return s?e.jsx(V,{children:r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs(E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-2xl bg-zinc-900 border border-white/10 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-teal-500/10 to-cyan-500/10 border-b border-white/5 p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-5"}),e.jsx("button",{onClick:i,className:"absolute top-6 right-6 w-8 h-8 rounded-lg bg-zinc-800/50 border border-white/5 flex items-center justify-center hover:bg-zinc-800 transition-colors",children:e.jsx(K,{className:"w-4 h-4 text-zinc-400"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-teal-500/20 border border-teal-500/30 flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white italic",children:"ROOM DETAILS"}),e.jsx("p",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wider",children:u})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-3 px-4 py-3 bg-zinc-900/60 rounded-xl border border-white/5",children:[e.jsx(Q,{className:"w-5 h-5 text-teal-400 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-widest",children:"Time to Match Start"}),e.jsx("p",{className:"text-xl font-black text-teal-400 italic",children:x})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-yellow-500 uppercase tracking-wide mb-1",children:"Important"}),e.jsx("p",{className:"text-xs text-yellow-200/80 font-medium leading-relaxed",children:"Join the room 5 minutes before match start. Do not share these credentials with anyone."})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 block",children:"Room ID"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-zinc-800/50 border border-white/5 rounded-xl",children:e.jsx("p",{className:"text-2xl font-black text-white italic tracking-wider",children:s.roomId})}),e.jsx("button",{onClick:()=>j(s.roomId,"roomId"),className:"w-12 h-12 rounded-xl bg-teal-500 hover:bg-teal-400 transition-colors flex items-center justify-center shadow-lg",children:d.roomId?e.jsx(O,{className:"w-5 h-5 text-black"}):e.jsx(B,{className:"w-5 h-5 text-black"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 block",children:"Password"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-zinc-800/50 border border-white/5 rounded-xl",children:e.jsx("p",{className:"text-2xl font-black text-white italic tracking-wider",children:s.password})}),e.jsx("button",{onClick:()=>j(s.password,"password"),className:"w-12 h-12 rounded-xl bg-teal-500 hover:bg-teal-400 transition-colors flex items-center justify-center shadow-lg",children:d.password?e.jsx(O,{className:"w-5 h-5 text-black"}):e.jsx(B,{className:"w-5 h-5 text-black"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(ue,{className:"w-3 h-3"}),"Server"]}),e.jsx("div",{className:"px-4 py-3 bg-zinc-800/50 border border-white/5 rounded-xl",children:e.jsx("p",{className:"font-bold text-white",children:s.server})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"}),"Map"]}),e.jsx("div",{className:"px-4 py-3 bg-zinc-800/50 border border-white/5 rounded-xl",children:e.jsx("p",{className:"font-bold text-white",children:s.map})})]})]}),s.specialInstructions&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 block",children:"Special Instructions"}),e.jsx("div",{className:"px-4 py-3 bg-teal-500/5 border border-teal-500/20 rounded-xl",children:e.jsx("p",{className:"text-sm text-zinc-300 font-medium leading-relaxed",children:s.specialInstructions})})]}),e.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-4",children:[e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-wider mb-3",children:"How to Join"}),e.jsxs("ol",{className:"space-y-2 text-xs text-zinc-400 font-medium",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-teal-500/20 text-teal-400 flex items-center justify-center text-[10px] font-black",children:"1"}),e.jsx("span",{children:"Open the game and navigate to Custom Room"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-teal-500/20 text-teal-400 flex items-center justify-center text-[10px] font-black",children:"2"}),e.jsx("span",{children:"Enter the Room ID and Password shown above"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-teal-500/20 text-teal-400 flex items-center justify-center text-[10px] font-black",children:"3"}),e.jsx("span",{children:"Wait for the host to start the match"})]})]})]})]}),e.jsx("div",{className:"border-t border-white/5 p-6",children:e.jsx("button",{onClick:i,className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 rounded-xl font-black text-sm uppercase tracking-widest text-white transition-colors",children:"Close"})})]})]})}):null},Ne=({isOpen:r,onClose:i,tournament:s,onJoin:u})=>{const{user:t}=W(),{balance:d}=Y(),f=H(),[x,g]=l.useState(1),[j,o]=l.useState(!1),[m,N]=l.useState(""),[h,y]=l.useState([]),[v,T]=l.useState(!1),b=s.teamSize||1,w=b>1,k=s.entryFee===0;l.useEffect(()=>{(async()=>{if(!r||!t)return;let n=null;try{n=await le.getMyProfile(t.uid||t.id,t.id)}catch{}const p=s.gameId?.toLowerCase()||"",S=n?.profile?.gameAccounts?.[p]||"",Z=n?.profile?.displayName||t?.displayName||"",q=S||Z,ee=Array(b).fill(null).map((te,L)=>({name:L===0?q:"",role:L===0?"Leader":`Member ${L+1}`}));y(ee),N(w?"":q||"Solo Player"),g(1)})()},[r,b,w,t,s]);const F=(a,n)=>{const p=[...h];p[a].name=n,y(p)},A=w?m.trim().length>0:!0,P=h.every(a=>a.name.trim().length>0)&&v,D=async()=>{if(s){if(s.entryFee>0&&d<s.entryFee){z.error("Insufficient balance! Please add money to your wallet.");return}o(!0);try{await u(m,h),z.success("Successfully joined tournament!"),i()}catch(a){z.error(a.message||"Join failed. Please try again.")}finally{o(!1)}}},c=w?b===2?"DUO":"SQUAD":"SOLO";return e.jsx(V,{children:r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto",children:[e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),e.jsxs(E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-2xl bg-zinc-900 border border-white/10 rounded-3xl shadow-2xl overflow-hidden my-8 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-teal-500/10 to-cyan-500/10 border-b border-white/5 p-6 shrink-0",children:[e.jsx("button",{onClick:i,className:"absolute top-6 right-6 w-8 h-8 rounded-lg bg-zinc-800/50 border border-white/5 flex items-center justify-center hover:bg-zinc-800 transition-colors",children:e.jsx(K,{className:"w-4 h-4 text-zinc-400"})}),e.jsx("h2",{className:"text-2xl font-black text-white italic pr-10 mb-1",children:"JOIN TOURNAMENT"}),e.jsxs("p",{className:"text-sm font-bold text-zinc-400 flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] uppercase tracking-wider bg-white/10 text-white",children:c}),s.title]}),e.jsx("div",{className:"flex items-center gap-2 mt-6",children:[1,2,3].map(a=>e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-black transition-colors ${x>=a?"bg-teal-500 text-black":"bg-zinc-800 text-zinc-500"}`,children:a}),e.jsx("div",{className:`h-1 flex-1 rounded-full ${x>=a?"bg-teal-500":"bg-zinc-800"}`})]},a))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-hide",children:[x===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(M,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{className:"text-xs font-black text-zinc-500 uppercase tracking-wider",children:"Prize"})]}),e.jsxs("p",{className:"text-2xl font-black text-white",children:["â‚¹",(s.prizePool/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ie,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{className:"text-xs font-black text-zinc-500 uppercase tracking-wider",children:"Entry"})]}),e.jsx("p",{className:"text-2xl font-black text-white",children:k?"FREE":`â‚¹${s.entryFee}`})]})]}),w?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-black text-white uppercase tracking-wider mb-2 block",children:"Team Name"}),e.jsx("input",{type:"text",value:m,onChange:a=>N(a.target.value),placeholder:"Enter your team name (e.g. Delta Force)",className:"w-full px-4 py-3 bg-zinc-800/50 border border-white/5 rounded-xl text-white placeholder-zinc-500 focus:outline-none focus:border-teal-500/30 transition-colors"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:"This name will be displayed on the leaderboard."})]}):e.jsxs("div",{className:"bg-teal-500/10 border border-teal-500/20 p-4 rounded-xl flex items-start gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-teal-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-teal-100",children:"Solo Tournament"}),e.jsx("p",{className:"text-xs text-teal-500/80 mt-1",children:"You are registering as an individual player using your profile name."})]})]}),e.jsxs("div",{className:"bg-yellow-500/5 border border-yellow-500/20 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-xs font-black text-yellow-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(re,{className:"w-3 h-3"}),"Important Info"]}),e.jsxs("ul",{className:"text-xs text-zinc-400 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Ensure all players verify their IGNs correctly."}),e.jsx("li",{children:"Room ID & Password will be shared 10 mins before start."}),e.jsx("li",{children:"Check-in is required 30 mins before match."})]})]})]}),x===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-black text-white italic",children:"PLAYER DETAILS"}),e.jsxs("span",{className:"text-xs font-bold text-zinc-500 bg-zinc-800 px-2 py-1 rounded",children:[h.length," / ",b," Filled"]})]}),e.jsx("div",{className:"space-y-4",children:h.map((a,n)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-wider ml-1",children:n===0?"Team Leader (You)":`Player ${n+1}`}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a.name,onChange:p=>F(n,p.target.value),placeholder:n===0?"Your In-Game Name":"Teammate's In-Game Name",className:"w-full px-4 py-3 bg-zinc-800/50 border border-white/10 rounded-xl text-white placeholder-zinc-600 focus:outline-none focus:border-teal-500/30 transition-colors pl-10"}),e.jsx(_,{className:"absolute left-3 top-3.5 w-4 h-4 text-zinc-600"}),a.name.length>0&&e.jsx(O,{className:"absolute right-3 top-3.5 w-4 h-4 text-teal-500"})]})]},n))}),e.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-zinc-800/30 border border-white/5 cursor-pointer hover:bg-zinc-800/50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:a=>T(a.target.checked),className:"mt-1 w-4 h-4 rounded border-zinc-600 bg-zinc-700 checked:bg-teal-500 focus:ring-0"}),e.jsx("div",{className:"text-xs text-zinc-400",children:"I confirm that all provided In-Game Names (IGNs) are correct. Incorrect IGNs may lead to kick/disqualification from the room."})]})]}),x===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-800/30 border border-white/5 rounded-2xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-white/5",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Entry Fee"}),e.jsx("span",{className:"text-xl font-bold text-white",children:k?"FREE":`â‚¹${s.entryFee}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-zinc-500",children:"Wallet Balance"}),e.jsxs("span",{className:"text-zinc-300",children:["â‚¹",d]})]}),!k&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-zinc-500",children:"Deduction"}),e.jsxs("span",{className:"text-red-400",children:["- â‚¹",s.entryFee]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center",children:[e.jsx("span",{className:"font-black text-white uppercase tracking-wider text-sm",children:"New Balance"}),e.jsxs("span",{className:`text-xl font-black ${d-s.entryFee<0?"text-red-500":"text-teal-400"}`,children:["â‚¹",Math.max(0,d-s.entryFee)]})]})]}),s.entryFee>d?e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(ge,{className:"w-5 h-5 text-red-500 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-red-500 text-sm",children:"Insufficient Funds"}),e.jsxs("p",{className:"text-xs text-red-400/80 mt-1",children:["You need â‚¹",s.entryFee-d," more to join. Please add funds to your wallet."]}),e.jsx("button",{onClick:()=>{i(),f("/wallet")},className:"mt-3 px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-xs font-bold rounded-lg transition-colors",children:"Add Funds"})]})]}):e.jsxs("div",{className:"bg-teal-500/10 border border-teal-500/20 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-teal-400"}),e.jsx("p",{className:"text-xs text-teal-200",children:"Funds are secure and will be refunded if the tournament is cancelled."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/5 bg-zinc-900 shrink-0 flex gap-3",children:[x>1&&e.jsx("button",{onClick:()=>g(x-1),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 rounded-xl font-black text-xs uppercase tracking-widest text-white transition-colors",children:"Back"}),x<3?e.jsx("button",{onClick:()=>g(x+1),disabled:x===1?!A:!P,className:"flex-1 py-3 bg-teal-500 hover:bg-teal-400 disabled:bg-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed rounded-xl font-black text-xs uppercase tracking-widest text-black transition-all",children:"Next Step"}):e.jsx("button",{onClick:D,disabled:j||s.entryFee>0&&d<s.entryFee,className:"flex-1 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 disabled:from-zinc-800 disabled:to-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed rounded-xl font-black text-xs uppercase tracking-widest text-black transition-all shadow-lg shadow-teal-500/20 flex items-center justify-center gap-2",children:j?e.jsx("span",{className:"animate-pulse",children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-3 h-3"}),k?"Confirm & Join":`Pay â‚¹${s.entryFee} & Join`]})})]})]})]})})},Ue=()=>{const{id:r}=ae(),{user:i}=W(),{refreshWallet:s}=Y(),u=H(),[t,d]=l.useState(null),[f,x]=l.useState([]),[g,j]=l.useState(!0),[o,m]=l.useState(!1),[N,h]=l.useState(null),[y,v]=l.useState(!1),[T,b]=l.useState(!1),[w,k]=l.useState(null);l.useEffect(()=>{if(!r){u("/tournaments");return}F()},[r]);const F=async()=>{try{j(!0);const c=await C.getTournament(r);c?(d(c),i&&c.registeredPlayers?.includes(i.id)&&m(!0)):k("Tournament Information Unavailable")}catch{k("Failed to load tournament data")}finally{j(!1)}};l.useEffect(()=>{if(!r||!t)return;(async()=>{try{const a=await C.getParticipants(r);x(a)}catch{}})(),i&&C.getJoinStatus(r).then(a=>{a.joined&&m(!0)})},[r,i,t]),l.useEffect(()=>{if(!t||!o)return;const c=async()=>{const n=new Date(t.startDate).getTime(),p=Date.now();if(n-p<=15*60*1e3)try{const S=await C.getRoomDetails(t.id);S&&h(S)}catch{}};c();const a=setInterval(c,3e4);return()=>clearInterval(a)},[t,o]);const A=async(c,a)=>{if(!i)return u("/auth");if(t)try{(await C.joinTournament(r,{teamName:c,players:a.map(p=>({userId:i.id,userName:p.name,role:p.role}))}))?.alreadyJoined?z.success("Already registered!"):z.success("Successfully joined!",{icon:"ðŸš€"}),m(!0),b(!1),F(),s()}catch(n){z.error(n.message||"Join failed")}};if(g)return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] flex flex-col items-center justify-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-2 border-teal-500/10 rounded-full"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-t-2 border-teal-500 rounded-full animate-spin"})]}),e.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.4em]",children:"Calibrating War Room..."})]});if(w||!t)return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center border border-white/10 mb-6",children:e.jsx(M,{className:"w-10 h-10 text-zinc-600 grayscale"})}),e.jsx("h2",{className:"text-xl font-black italic text-white uppercase tracking-wider mb-2",children:w||"Tournament Not Found"}),e.jsx("p",{className:"text-zinc-500 text-xs font-bold uppercase tracking-widest max-w-sm mb-8",children:"The requested combat arena could not be located in the archives."}),e.jsx("button",{onClick:()=>u("/tournaments"),className:"px-8 py-4 bg-teal-500 text-black font-black uppercase text-xs tracking-[0.2em] rounded-xl hover:bg-teal-400 transition-all",children:"Return to Lobby"})]});const P=(t.currentTeams||0)>=(t.maxTeams||0),D=!o&&!P&&t.status!=="completed";return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] text-white pb-32 font-sans overflow-x-hidden selection:bg-teal-500/30",children:[e.jsx(se,{}),e.jsxs("div",{className:"sticky top-0 z-50 bg-[#0a0e1a]/80 backdrop-blur-xl border-b border-white/5 p-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>u("/tournaments"),className:"p-2 hover:bg-white/5 rounded-xl transition-all group",children:e.jsx(oe,{className:"rotate-180 text-zinc-500 group-hover:text-white",size:24})}),e.jsxs("h1",{className:"text-sm font-black uppercase tracking-[0.3em] italic flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-teal-400"}),"Combat Arena"]}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-4 pt-10 space-y-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"px-3 py-1 bg-teal-500/10 border border-teal-500/20 rounded-full text-[9px] font-black text-teal-400 uppercase tracking-widest shadow-lg",children:t.gameName}),e.jsx("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border shadow-lg ${t.status==="live"?"bg-red-500/10 text-red-500 border-red-500/20 animate-pulse":t.status==="completed"?"bg-zinc-800 text-zinc-500 border-white/5":"bg-teal-500/10 text-teal-400 border-teal-500/20"}`,children:t.status})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-5xl md:text-7xl font-black italic tracking-tighter leading-none text-white drop-shadow-2xl",children:[t.title.toUpperCase(),e.jsx("span",{className:"text-teal-500 italic",children:"."})]}),e.jsx("p",{className:"text-zinc-500 font-bold text-base md:text-lg max-w-2xl leading-relaxed italic",children:t.description})]}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[#0E1424] to-[#0a0e1a] p-8 rounded-[2.5rem] border border-white/5 shadow-3xl",children:[e.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-3 gap-8 md:divide-x divide-white/5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 block",children:"Total Bounty"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-500/10 flex items-center justify-center border border-teal-500/20",children:e.jsx(M,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("span",{className:"text-4xl font-black italic tracking-tighter text-teal-400",children:["â‚¹",t.prizePool.toLocaleString()]})]})]}),e.jsxs("div",{className:"md:pl-8 space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 block",children:"Entry Fee"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center border border-white/5",children:e.jsx(me,{className:"w-5 h-5 text-zinc-400"})}),e.jsx("span",{className:"text-4xl font-black italic tracking-tighter text-white",children:t.entryFee===0?"FREE":`â‚¹${t.entryFee}`})]})]}),e.jsxs("div",{className:"md:pl-8 space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-zinc-500 block",children:"Squad Slots"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center border border-white/5",children:e.jsx(_,{className:"w-5 h-5 text-zinc-400"})}),e.jsxs("span",{className:"text-4xl font-black italic tracking-tighter text-white",children:[t.currentTeams,e.jsx("span",{className:"text-zinc-700 mx-1",children:"/"}),t.maxTeams]})]})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-teal-500/5 blur-[100px] -mr-32 -mt-32 rounded-full pointer-events-none"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[D&&e.jsxs("button",{onClick:()=>b(!0),className:"w-full py-6 bg-white text-black font-black text-sm uppercase tracking-[0.2em] rounded-[1.5rem] hover:bg-teal-400 transition-all shadow-[0_10px_40px_rgba(255,255,255,0.1)] active:scale-[0.98] flex items-center justify-center gap-4",children:["Deploy Unit to Battlefield ",e.jsx(de,{className:"w-4 h-4 rotate-180"})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N&&e.jsxs("button",{onClick:()=>v(!0),className:"w-full py-5 bg-yellow-500 text-black font-black text-sm uppercase tracking-widest rounded-2xl hover:bg-yellow-400 transition-all shadow-xl animate-pulse flex items-center justify-center gap-3 border-4 border-yellow-500/20",children:[e.jsx(I,{className:"w-5 h-5"})," View Secret Credentials"]}),e.jsxs("button",{onClick:()=>document.getElementById("chat-section")?.scrollIntoView({behavior:"smooth"}),className:"w-full py-5 bg-[#0E1424] border border-white/5 text-teal-400 font-black text-sm uppercase tracking-widest rounded-2xl hover:bg-[#162036] transition-all flex items-center justify-center gap-3",children:[e.jsx(G,{className:"w-5 h-5"})," Combat Audio / Chat"]})]}),P&&!o&&e.jsx("div",{className:"w-full py-6 bg-zinc-900 border border-red-500/20 text-red-500/50 font-black text-sm uppercase tracking-widest rounded-[1.5rem] text-center italic",children:"Combat Capacity Maxed â€¢ Extraction Closed"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-8 bg-[#0E1424]/40 backdrop-blur-xl border border-white/5 rounded-[2.5rem] space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-teal-400",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Intel Briefing"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(J,{label:"Strategic Objective",value:t.format,icon:e.jsx(_,{size:12})}),e.jsx(J,{label:"Area of Operation",value:t.mapMode,icon:e.jsx(X,{size:12})}),e.jsx(J,{label:"Deployment Time",value:new Date(t.startDate).toLocaleTimeString(),icon:e.jsx(Q,{size:12})})]})]}),e.jsxs("div",{className:"p-8 bg-[#0E1424]/40 backdrop-blur-xl border border-white/5 rounded-[2.5rem] space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-teal-400",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Strategic Support"})]}),e.jsxs("ul",{className:"space-y-4",children:[e.jsx($,{text:"Fair play protocol strictly enforced"}),e.jsx($,{text:"Voice comms available post-join"}),e.jsx($,{text:"Direct access to verified hosts"})]})]})]}),e.jsxs("section",{id:"chat-section",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-zinc-500",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Secure Sector Comms"})]}),o&&e.jsxs("span",{className:"text-[9px] font-black text-teal-500 uppercase tracking-widest flex items-center gap-1.5 animation-pulse",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-teal-500"})," Live Feed"]})]}),o?e.jsx("div",{className:"rounded-[2.5rem] overflow-hidden border border-white/5",children:e.jsx(ne,{tournamentId:t.id,tournamentName:t.title,isAdmin:i?.id===t.organizerId})}):e.jsxs("div",{className:"p-20 text-center bg-[#0E1424]/40 border border-dashed border-white/10 rounded-[2.5rem] group hover:border-teal-500/20 transition-all",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx(I,{className:"w-full h-full text-zinc-900 group-hover:text-teal-900 transition-colors"}),e.jsx(we,{className:"absolute inset-0 m-auto w-6 h-6 text-zinc-800"})]}),e.jsx("h3",{className:"text-sm font-black text-zinc-400 uppercase tracking-widest mb-2",children:"Sector Restricted"}),e.jsx("p",{className:"text-[10px] font-bold text-zinc-600 uppercase tracking-widest",children:"Authenticated deployment required for comms access"})]})]}),e.jsxs("section",{className:"space-y-8 pb-20",children:[e.jsxs("div",{className:"flex items-center gap-3 text-zinc-500 px-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsxs("h2",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:["Active Combat Units (",f.length,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.map((c,a)=>e.jsxs("div",{className:"p-5 bg-[#0E1424]/40 border border-white/5 rounded-3xl flex items-center justify-between group hover:border-teal-500/30 transition-all duration-500",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center font-black text-zinc-600 group-hover:text-teal-400 group-hover:bg-teal-500/10 transition-all font-black text-lg italic",children:String(a+1).padStart(2,"0")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-base italic tracking-tighter text-white uppercase group-hover:text-teal-400 transition-colors",children:c.teamName||c.players?.[0]?.userName||"Operator"}),e.jsx("p",{className:"text-[9px] font-black text-zinc-600 uppercase tracking-[0.2em] mt-1",children:"Status: Operational"})]})]}),i?.id===c.players?.[0]?.userId&&e.jsx("div",{className:"px-4 py-1.5 bg-teal-500 text-black font-black text-[9px] rounded-xl uppercase tracking-widest shadow-lg",children:"Your Unit"})]},a)),f.length===0&&e.jsx("div",{className:"col-span-full py-20 bg-white/5 rounded-[2.5rem] border border-dashed border-white/5 text-center",children:e.jsx("p",{className:"text-zinc-600 text-[10px] font-black uppercase tracking-[0.5em]",children:"Scanning for biological signals..."})})]})]})]}),y&&N&&e.jsx(je,{isOpen:y,onClose:()=>v(!1),roomDetails:N,tournamentName:t.title,startTime:new Date(t.startDate)}),T&&e.jsx(Ne,{isOpen:T,onClose:()=>b(!1),tournament:t,onJoin:A})]})},J=({label:r,value:i,icon:s})=>e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-white/5 last:border-0 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-zinc-700 group-hover:text-teal-500/50 transition-colors",children:s}),e.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-widest",children:r})]}),e.jsx("span",{className:"text-[11px] font-black text-zinc-300 uppercase tracking-tight italic",children:i})]}),$=({text:r})=>e.jsxs("li",{className:"flex items-center gap-4 group",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-teal-500/30 group-hover:bg-teal-500 transition-colors"}),e.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-wider group-hover:text-zinc-300 transition-colors leading-relaxed italic",children:r})]}),we=r=>e.jsx("svg",{...r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})});export{Ue as default};
