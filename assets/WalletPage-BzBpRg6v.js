import{c as w,u as E,j as e}from"./index--b10zKEF.js";import{r as l}from"./react-vendor-wpuS94OW.js";import{u as j}from"./UserService-DxS7x_ec.js";import{W as I}from"./WalletModal-Cw6u5lQQ.js";import{w as p}from"./WalletService-Dz-hmYOq.js";import{F as W,z as x}from"./index-CNUiO53a.js";import{C as z}from"./chevron-right-CLNVP4ML.js";import{S as P}from"./shield-check-B7t6Kk0y.js";import{m as N}from"./animation-vendor-DcM-v-LS.js";import{P as T}from"./plus-C1NsX3pj.js";import{A,H as _}from"./history-BbvZhWCe.js";import{C as R}from"./copy-CCS_cXXG.js";import"./x-ByfO-DNc.js";import"./index-B9ygI19o.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],L=w("check",F);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],D=w("gift",M),ee=()=>{const{user:a}=E(),[m,b]=l.useState(null),[i,v]=l.useState(null),[h,u]=l.useState([]),[d,o]=l.useState(null),[g,f]=l.useState(!1);l.useEffect(()=>{if(!a)return;(async()=>{const t=a?.id||a?.uid;if(t)try{const r=await p.getWallet(t);b(r),u(r.transactions);const S=await j.getProfile(t);v(S)}catch(r){console.error("Initial fetch error:",r)}})();const c=t=>{const r=t.detail;r&&(b(r),u(r.transactions))};window.addEventListener("walletUpdate",c);const n=a?.id||a?.uid,C=n?j.subscribeToProfile(n,t=>{v(t)}):()=>{};return()=>{window.removeEventListener("walletUpdate",c),C()}},[a]);const y=async s=>{const c=a?.id||a?.uid;if(!(!c||!d))try{d==="add"?(await p.addFunds(s,c),x.success(`₹${s} Added to Deployment Fund`)):(await p.withdrawFunds(s,c,{method:"default"}),x.success(`Withdrawal Request of ₹${s} Submitted`)),o(null)}catch(n){x.error(n instanceof Error?n.message:"Action failed")}},k=()=>{i?.referralCode&&(navigator.clipboard.writeText(i.referralCode),f(!0),x.success("Referral Code Copied!"),setTimeout(()=>f(!1),2e3))};return e.jsxs("div",{className:"min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] pb-24 transition-colors duration-300",children:[e.jsx(W,{position:"top-right"}),e.jsxs("div",{className:"sticky top-0 z-30 bg-[var(--bg-primary)]/80 backdrop-blur-xl border-b border-[var(--border)] p-4 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-[var(--glass)] rounded-xl transition-all",children:e.jsx(z,{className:"rotate-180",size:24})}),e.jsxs("h1",{className:"text-sm font-black uppercase tracking-widest italic flex items-center gap-2",children:[e.jsx(P,{size:18,className:"text-[var(--accent)]"}),"Combat Wallet"]}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsxs("div",{className:"max-w-xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--surface)] to-[var(--bg-secondary)] p-8 rounded-[2.5rem] border border-[var(--border)] shadow-2xl",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-secondary)] mb-4 block",children:"Total Available Balance"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#fbbf24]/20 p-2 border border-[#fbbf24]/20",children:e.jsx("img",{src:"/Images/espo.png",alt:"ESPO",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-5xl font-black tracking-tighter italic",children:["₹",m?.balance?.toLocaleString()||"0"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-10",children:[e.jsxs("div",{className:"p-4 bg-[var(--glass)] rounded-3xl border border-[var(--border)]",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] mb-1",children:"Pending Withdrawals"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#fbbf24]/20 p-0.5",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full grayscale"})}),e.jsx("span",{className:"text-lg font-black italic",children:"₹0.00"})]})]}),e.jsxs("div",{className:"p-4 bg-[var(--glass)] rounded-3xl border border-[var(--border)]",children:[e.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] mb-1",children:"Total Career Earnings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[var(--accent)]/20 p-0.5",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full"})}),e.jsxs("span",{className:"text-lg font-black italic text-[var(--accent)]",children:["₹",i?.totalEarnings?.toLocaleString()||"0"]})]})]})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#00ffc2]/5 blur-[100px] -mr-32 -mt-32 rounded-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(N.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o("add"),className:"group flex items-center justify-between p-6 bg-[var(--glass)] border border-[var(--border)] rounded-3xl hover:border-[var(--accent)]/30 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-[var(--accent)]/10 rounded-2xl flex items-center justify-center p-3",children:e.jsx("img",{src:"/Images/addcoin.png",alt:"Buy",className:"w-full h-full object-contain filter drop-shadow-[0_0_8px_rgba(0,255,194,0.5)]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black uppercase tracking-widest text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors",children:"Buy ESPO Coins"}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:"Purchase combat currency instantly"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-[var(--glass)] text-[var(--text-secondary)]/20 group-hover:text-[var(--text-primary)] transition-colors",children:e.jsx(T,{size:20})})]}),e.jsxs(N.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o("withdraw"),className:"group flex items-center justify-between p-6 bg-[var(--glass)] border border-[var(--border)] rounded-3xl hover:border-[#fbbf24]/30 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-[#fbbf24]/10 rounded-2xl flex items-center justify-center p-3",children:e.jsx("img",{src:"/Images/withdraw.png",alt:"Withdraw",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black uppercase tracking-widest text-[var(--text-primary)] group-hover:text-[#fbbf24] transition-colors",children:"Withdraw Credits"}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:"Min. 50 ESPO coins required"})]})]}),e.jsx("div",{className:"p-2 rounded-full bg-[var(--glass)] text-[var(--text-secondary)]/20 group-hover:text-[var(--text-primary)] transition-colors",children:e.jsx(A,{size:20})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"text-[var(--text-secondary)]",size:16}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-secondary)]",children:"Operation Records"})]}),e.jsx("button",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--accent)]",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("div",{className:"p-12 text-center bg-[var(--glass)] border border-dashed border-[var(--border)] rounded-[2rem]",children:e.jsx("p",{className:"text-[var(--text-secondary)] text-sm font-medium",children:"No logistical operations detected."})}):h.slice(0,3).map(s=>e.jsxs("div",{className:"p-5 bg-[var(--glass)] border border-[var(--border)] rounded-3xl flex items-center justify-between group hover:border-[var(--border)]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${s.type==="add"?"bg-[var(--accent)]/10":"bg-red-500/10"}`,children:e.jsx("div",{className:"w-6 h-6 p-1 border rounded-lg border-[var(--border)] flex items-center justify-center bg-black/50",children:e.jsx("img",{src:"/Images/logo.png",className:"w-full h-full opacity-40"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-wide group-hover:text-[var(--accent)] transition-colors",children:s.description}),e.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] font-bold uppercase mt-1",children:new Date(s.timestamp).toLocaleDateString()})]})]}),e.jsxs("div",{className:`text-lg font-black italic tracking-tighter ${s.type==="add"?"text-[var(--accent)]":"text-red-500"}`,children:[e.jsx("span",{className:"text-xs mr-2 relative top-[-4px]",children:e.jsx("img",{src:"/Images/espo.png",className:`w-4 h-4 inline-block ${s.type!=="add"&&"grayscale opacity-50"}`})}),s.type==="add"?"+":"-",s.amount.toFixed(2)]})]},s.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(D,{className:"text-[var(--accent)]",size:16}),e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Strategic Recruitment"})]}),e.jsxs("div",{className:"bg-[var(--accent)]/5 border border-[var(--accent)]/10 p-8 rounded-[2.5rem] space-y-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-secondary)] block mb-2",children:"Total Referral Earnings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-[#fbbf24]/20 p-1 rounded-full border border-[#fbbf24]/20",children:e.jsx("img",{src:"/Images/espo.png",alt:"E",className:"w-full h-full object-contain"})}),e.jsxs("span",{className:"text-2xl font-black italic tracking-tighter text-[var(--text-primary)]",children:["₹",i?.referralEarnings?.toFixed(2)||"0.00"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-[var(--accent)]/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative flex items-center justify-between p-4 bg-black/60 border border-[var(--border)] rounded-2xl",children:[e.jsx("span",{className:"text-sm font-black italic tracking-widest text-[var(--accent)] selection:bg-[var(--accent)]/20",children:i?.referralCode||"LOADING..."}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-[var(--accent)] text-[var(--bg-primary)] text-[10px] font-black uppercase tracking-widest rounded-xl hover:scale-105 active:scale-95 transition-all shadow-[0_5px_15px_rgba(0,255,194,0.2)]",children:[g?e.jsx(L,{size:14}):e.jsx(R,{size:14}),g?"Copied":"Copy Code"]})]})]})]})]})]}),e.jsx(I,{isOpen:d!==null,onClose:()=>o(null),type:d||"add",currentBalance:m?.balance||0,onSubmit:y})]})};export{ee as default};
